<!--BARD-->

new entry "Interrupt_BardicInspiration_Attack"
type "InterruptData"
data "DisplayName" "hc9735187g68cag427ag8680g4ec1859432dc;1"
data "Description" "h843e9f50g1485g4d5dgbc14g6b21f6689a0a;2"
data "DescriptionParams" "1d4"
data "Icon" "PassiveFeature_BardicInspiration_Attack"
data "InterruptContext" "OnPostRoll"
data "InterruptContextScope" "Self"
data "InterruptFlags" "InterruptWhileInvisible"
data "Container" "YesNoDecision"
data "Conditions" "not Dead(context.Observer) and HasInterruptedAttack() and Self(context.Observer,context.Source) and not AnyEntityIsItem() and IsFlatValueInterruptInteresting(4, context.Source)"
data "Properties" "AdjustRoll(OBSERVER_OBSERVER,1d4);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION_D8);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION_D10);ApplyStatus(OBSERVER_OBSERVER,INTERRUPT_BARDIC_INSPIRATION_ATTACK,100,0)"
data "Cost" "BardicInspiration:1"
data "Stack" "BardicInspiration"
data "InterruptDefaultValue" "Ask;Enabled"

new entry "Interrupt_BardicInspiration_Attack_d8"
type "InterruptData"
using "Interrupt_BardicInspiration_Attack"
data "DescriptionParams" "1d8"
data "Conditions" "not Dead(context.Observer) and HasInterruptedAttack() and Self(context.Observer,context.Source) and not AnyEntityIsItem() and IsFlatValueInterruptInteresting(8, context.Source)"
data "Properties" "AdjustRoll(OBSERVER_OBSERVER,1d8);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION_D8);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION_D10);ApplyStatus(OBSERVER_OBSERVER,INTERRUPT_BARDIC_INSPIRATION_ATTACK,100,0)"
data "InterruptDefaultValue" "Ask;Enabled"

new entry "Interrupt_BardicInspiration_Attack_d10"
type "InterruptData"
using "Interrupt_BardicInspiration_Attack"
data "DescriptionParams" "1d12"
data "Conditions" "not Dead(context.Observer) and HasInterruptedAttack() and Self(context.Observer,context.Source) and not AnyEntityIsItem() and IsFlatValueInterruptInteresting(12, context.Source)"
data "Properties" "AdjustRoll(OBSERVER_OBSERVER,1d12);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION_D8);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION_D10);ApplyStatus(OBSERVER_OBSERVER,INTERRUPT_BARDIC_INSPIRATION_ATTACK,100,0)"
data "InterruptDefaultValue" "Ask;Enabled"

new entry "Interrupt_BardicInspiration_SavingThrow"
type "InterruptData"
using "Interrupt_BardicInspiration_Attack"
data "DisplayName" "h21b3aaeeg4994g4506gb44fg648ca1ffd977;1"
data "Description" "hb23ba16cgb6e1g4202gb629gdaed9614cb1b;2"
data "Icon" "PassiveFeature_BardicInspiration_SavingThrow"
data "InterruptContext" "OnPostRoll"
data "Conditions" "not Dead(context.Observer) and HasInterruptedSavingThrow() and Self(context.Observer,context.Target) and not AnyEntityIsItem() and IsFlatValueInterruptInteresting(4)"
data "Properties" "AdjustRoll(OBSERVER_OBSERVER,1d4);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION_D8);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION_D10);ApplyStatus(OBSERVER_OBSERVER,INTERRUPT_BARDIC_INSPIRATION_SAVINGTHROW,100,0)"
data "InterruptDefaultValue" "Ask;Enabled"

new entry "Interrupt_BardicInspiration_SavingThrow_d8"
type "InterruptData"
using "Interrupt_BardicInspiration_SavingThrow"
data "DescriptionParams" "1d8"
data "Conditions" "not Dead(context.Observer) and HasInterruptedSavingThrow() and Self(context.Observer,context.Target) and not AnyEntityIsItem() and IsFlatValueInterruptInteresting(8)"
data "Properties" "AdjustRoll(OBSERVER_OBSERVER,1d8);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION_D8);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION_D10);ApplyStatus(OBSERVER_OBSERVER,INTERRUPT_BARDIC_INSPIRATION_SAVINGTHROW,100,0)"
data "InterruptDefaultValue" "Ask;Enabled"

new entry "Interrupt_BardicInspiration_SavingThrow_d10"
type "InterruptData"
using "Interrupt_BardicInspiration_SavingThrow"
data "DescriptionParams" "1d12"
data "Conditions" "not Dead(context.Observer) and HasInterruptedSavingThrow() and Self(context.Observer,context.Target) and not AnyEntityIsItem() and IsFlatValueInterruptInteresting(12)"
data "Properties" "AdjustRoll(OBSERVER_OBSERVER,1d12);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION_D8);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION_D10);ApplyStatus(OBSERVER_OBSERVER,INTERRUPT_BARDIC_INSPIRATION_SAVINGTHROW,100,0)"
data "InterruptDefaultValue" "Ask;Enabled"

<!--COLLEGE OF CAPTIVATION-->

new entry "Interrupt_CoverofCaptivation"
type "InterruptData"
data "DisplayName" "habfab1deg96a3g4928gbb99g29b61ef000z3;1"
data "Description" "hacc1d957g1ef1g4debg9f26gc25bcf4000zc;3"
data "Icon" "Action_MantleOfInspiration"
data "InterruptContext" "OnPostRoll"
data "InterruptContextScope" "Self"
data "InterruptFlags" "InterruptWhileInvisible"
data "Container" "YesNoDecision"
data "Conditions" "IsAbleToReact(context.Observer) and Self(context.Target,context.Observer) and HasInterruptedAttack() and not (IsMiss() or IsCriticalMiss()) and not AnyEntityIsItem() and IsRerollInterruptInteresting(context.Source)"
data "Properties" "UseSpell(OBSERVER_TARGET,Shout_CoverofCaptivation_Interrupt,true,true,true);ApplyStatus(OBSERVER_TARGET,COVEROFCAPTIVATION,100,1)"
data "Cost" "BardicInspiration:1"
data "InterruptDefaultValue" "Ask;Enabled"
data "EnableCondition" "HasActionResource('BardicInspiration',1,0,false,false,context.Source)"
data "EnableContext" "OnActionResourcesChanged"
data "Stack" "SelfAboutBeHit"

new entry "Shout_CoverofCaptivation_Interrupt"
type "SpellData"
data "SpellType" "Shout"
data "Level" "0"
data "SpellSchool" "Abjuration"
data "TargetConditions" "Self()"
data "Icon" "Action_MantleOfInspiration"
data "DisplayName" "habfab1deg96a3g4928gbb99g29b61ef000z3;1"
data "Description" "hacc1d957g1ef1g4debg9f26gc25bcf4000zc;6"
data "TooltipStatusApply" "ApplyStatus(COVEROFCAPTIVATION,100,1)"
data "PrepareSound" "Spell_Prepare_Damage_Radiant_Gen_L1to3"
data "PrepareLoopSound" "Spell_Prepare_Damage_Radiant_Gen_L1to3_Loop"
data "CastSound" "Action_Cast_Bard_MantleOfInspiration"
data "TargetSound" "Action_Impact_Bard_MantleOfInspiration"
data "PreviewCursor" "Cast"
data "CastTextEvent" "Cast"
data "SpellAnimation" "dd86aa43-8189-4d9f-9a5c-454b5fe4a197,,;,,;bcc3b0d9-f04f-4448-aab0-e0ad641167cc,,;bf924cc6-8b39-4c3b-b1c0-eda264cf6150,,;cc5b0caf-3ed1-4711-a50d-11dc3f1fdc6a,,;,,;1715b877-4512-472e-9bd0-fd568a112e90,,;,,;,,"
data "VerbalIntent" "Buff"
data "SpellFlags" "HasVerbalComponent;HasSomaticComponent;IsSpell"
data "HitAnimationType" "None"
data "PrepareEffect" "6e5e37e7-8d9e-4cb2-955b-7a4fec2d3d64"
data "CastEffect" "ea434f70-87a9-47df-80ce-b91ad7209f7d"
data "TargetEffect" "01000301-8fd3-4a77-86fb-9b125ed5e675"

new entry "COVEROFCAPTIVATION"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "habfab1deg96a3g4928gbb99g29b61ef00zz3;1"
data "Description" "hacc1d957g1ef1g4debg9f26gc25bcf400zzc;4"
data "Icon" "Action_MantleOfInspiration"
data "SoundLoop" "Spell_Status_Buff_MO"
data "StackId" "COVEROFCAPTIVATION"
data "StackPriority" "99"
data "TickType" "StartTurn"
data "Boosts" "Resistance(Bludgeoning,Immune);Resistance(Piercing,Immune);Resistance(Slashing,Immune);Resistance(Cold,Immune);Resistance(Fire,Immune);Resistance(Lightning,Immune);Resistance(Thunder,Immune);Resistance(Acid,Immune);Resistance(Poison,Immune);Resistance(Radiant,Immune);Resistance(Necrotic,Immune);Resistance(Force,Immune);Resistance(Psychic,Immune)"
data "StatusGroups" "SG_RemoveOnRespec"
data "StatusEffect" "f8d8cc2f-fca8-448f-bb92-0c80054c3f10"
data "ManagedStatusEffectType" "Positive"
data "ManagedStatusEffectGroup" "6435c10a-c67d-4f79-8813-b84b0762f92b"
data "RemoveConditions" "not IsMiss() and not IsCriticalMiss()"
data "RemoveEvents" "OnAttacked"
data "HitAnimationType" "None"

<!--COLLEGE OF VALOR-->

new entry "Interrupt_CombatInspiration_Attack"
type "InterruptData"
using "Interrupt_BardicInspiration_Attack"
data "DisplayName" "he474b8dfgb613g418agbdf8g20c70b50e1b2;1"
data "Description" "hf2343393gc9ccg4783g8f26g4b757fd65e0b;2"
data "DescriptionParams" "1d4"
data "InterruptContext" "OnPostRoll"
data "Properties" "AdjustRoll(OBSERVER_OBSERVER,1d4);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION_COMBAT);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION_COMBAT_D8);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION_COMBAT_D10);ApplyStatus(OBSERVER_OBSERVER,INTERRUPT_BARDIC_INSPIRATION_COMBAT_ATTACK,100,0)"
data "InterruptDefaultValue" "Ask;Enabled"

new entry "Interrupt_CombatInspiration_Attack_d8"
type "InterruptData"
using "Interrupt_CombatInspiration_Attack"
data "DescriptionParams" "1d8"
data "Conditions" "not Dead(context.Observer) and HasInterruptedAttack() and Self(context.Observer,context.Source) and not AnyEntityIsItem() and IsFlatValueInterruptInteresting(8, context.Source)"
data "Properties" "AdjustRoll(OBSERVER_OBSERVER,1d8);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION_COMBAT);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION_COMBAT_D8);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION_COMBAT_D10);ApplyStatus(OBSERVER_OBSERVER,INTERRUPT_BARDIC_INSPIRATION_COMBAT_ATTACK,100,0)"
data "InterruptDefaultValue" "Ask;Enabled"

new entry "Interrupt_CombatInspiration_Attack_d10"
type "InterruptData"
using "Interrupt_CombatInspiration_Attack"
data "DescriptionParams" "1d12"
data "Conditions" "not Dead(context.Observer) and HasInterruptedAttack() and Self(context.Observer,context.Source) and not AnyEntityIsItem() and IsFlatValueInterruptInteresting(12, context.Source)"
data "Properties" "AdjustRoll(OBSERVER_OBSERVER,1d12);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION_COMBAT);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION_COMBAT_D8);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION_COMBAT_D10);ApplyStatus(OBSERVER_OBSERVER,INTERRUPT_BARDIC_INSPIRATION_COMBAT_ATTACK,100,0)"
data "InterruptDefaultValue" "Ask;Enabled"

new entry "Interrupt_CombatInspiration_SavingThrow_ArmorClass"
type "InterruptData"
using "Interrupt_CombatInspiration_Attack"
data "DisplayName" "h7ab5fb1fg7bc8g4403gbe63g19b28d7b2bd3;1"
data "Description" "h7f53adbag7148g45c1g9915g1480491df7b8;3"
data "DescriptionParams" "1d4"
data "Icon" "PassiveFeature_CombatInspiration_ArmorClassOrSavingThrow"
data "InterruptContext" "OnPostRoll"
data "Conditions" "not Dead(context.Observer) and ((HasInterruptedAttack() and IsFlatValueInterruptInteresting(4, context.Source)) or (HasInterruptedSavingThrow() and IsFlatValueInterruptInteresting(4))) and Self(context.Observer,context.Target) and not AnyEntityIsItem()"
data "Properties" "IF(HasInterruptedSavingThrow()):AdjustRoll(OBSERVER_OBSERVER,1d4);IF(HasInterruptedAttack()):AdjustRoll(OBSERVER_OBSERVER,0-1d4);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION_COMBAT);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION_COMBAT_D8);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION_COMBAT_D10);ApplyStatus(OBSERVER_OBSERVER,INTERRUPT_BARDIC_INSPIRATION_COMBAT_DEFENSE,100,0)"
data "InterruptDefaultValue" "Ask;Enabled"

new entry "Interrupt_CombatInspiration_SavingThrow_ArmorClass_d8"
type "InterruptData"
using "Interrupt_CombatInspiration_SavingThrow_ArmorClass"
data "DescriptionParams" "1d8"
data "Conditions" "not Dead(context.Observer) and ((HasInterruptedAttack() and IsFlatValueInterruptInteresting(8, context.Source)) or (HasInterruptedSavingThrow() and IsFlatValueInterruptInteresting(8))) and Self(context.Observer,context.Target) and not AnyEntityIsItem()"
data "Properties" "IF(HasInterruptedSavingThrow()):AdjustRoll(OBSERVER_OBSERVER,1d8);IF(HasInterruptedAttack()):AdjustRoll(OBSERVER_OBSERVER,0-1d8);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION_COMBAT);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION_COMBAT_D8);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION_COMBAT_D10);ApplyStatus(OBSERVER_OBSERVER,INTERRUPT_BARDIC_INSPIRATION_COMBAT_DEFENSE,100,0)"
data "InterruptDefaultValue" "Ask;Enabled"

new entry "Interrupt_CombatInspiration_SavingThrow_ArmorClass_d10"
type "InterruptData"
using "Interrupt_CombatInspiration_SavingThrow_ArmorClass"
data "DescriptionParams" "1d10"
data "Conditions" "not Dead(context.Observer) and ((HasInterruptedAttack() and IsFlatValueInterruptInteresting(12, context.Source)) or (HasInterruptedSavingThrow() and IsFlatValueInterruptInteresting(12))) and Self(context.Observer,context.Target) and not AnyEntityIsItem()"
data "Properties" "IF(HasInterruptedSavingThrow()):AdjustRoll(OBSERVER_OBSERVER,1d12);IF(HasInterruptedAttack()):AdjustRoll(OBSERVER_OBSERVER,0-1d12);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION_COMBAT);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION_COMBAT_D8);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION_COMBAT_D10);ApplyStatus(OBSERVER_OBSERVER,INTERRUPT_BARDIC_INSPIRATION_COMBAT_DEFENSE,100,0)"
data "InterruptDefaultValue" "Ask;Enabled"

new entry "Interrupt_CombatInspiration_Damage"
type "InterruptData"
using "Interrupt_CombatInspiration_Attack"
data "DisplayName" "haa3da5c0g3bc8g4fe1g870fgd137c96c4103;1"
data "Description" "h752b6036g1720g448eg85f1gd4c45a1d671b;2"
data "DescriptionParams" "1d4"
data "Icon" "PassiveFeature_CombatInspiration_WeaponDamage"
data "InterruptContext" "OnCastHit"
data "Conditions" "not Dead(context.Observer) and Character() and IsWeaponAttack() and Self(context.Source,context.Observer) and HasDamageEffectFlag(DamageFlags.Hit) and not IsKillingBlow() and not AnyEntityIsItem()"
data "Properties" "IF(IsMeleeAttack()):DealDamage(1d4, MainMeleeWeaponDamageType);IF(IsRangedAttack()):DealDamage(1d4, MainRangedWeaponDamageType);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION_COMBAT);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION_COMBAT_D8);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION_COMBAT_D10);ApplyStatus(OBSERVER_OBSERVER,INTERRUPT_BARDIC_INSPIRATION_COMBAT_DAMAGE,100,0)"
data "InterruptDefaultValue" "Ask;Enabled"

new entry "Interrupt_CombatInspiration_Damage_d8"
type "InterruptData"
using "Interrupt_CombatInspiration_Damage"
data "DescriptionParams" "1d8"
data "Properties" "IF(IsMeleeAttack()):DealDamage(1d8, MainMeleeWeaponDamageType);IF(IsRangedAttack()):DealDamage(1d8, MainRangedWeaponDamageType);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION_COMBAT);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION_COMBAT_D8);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION_COMBAT_D10);ApplyStatus(OBSERVER_OBSERVER,INTERRUPT_BARDIC_INSPIRATION_COMBAT_DAMAGE,100,0)"
data "InterruptDefaultValue" "Ask;Enabled"

new entry "Interrupt_CombatInspiration_Damage_d10"
type "InterruptData"
using "Interrupt_CombatInspiration_Damage"
data "DescriptionParams" "1d10"
data "Properties" "IF(IsMeleeAttack()):DealDamage(1d12, MainMeleeWeaponDamageType);IF(IsRangedAttack()):DealDamage(1d12, MainRangedWeaponDamageType);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION_COMBAT);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION_COMBAT_D8);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION_COMBAT_D10);ApplyStatus(OBSERVER_OBSERVER,INTERRUPT_BARDIC_INSPIRATION_COMBAT_DAMAGE,100,0)"
data "InterruptDefaultValue" "Ask;Enabled"

<!--PASSIVES-->

new entry "Interrupt_CuttingWords"
type "InterruptData"
data "DisplayName" "h04cd9c24g4e19g422bg983bge808593fb7c0;1"
data "Description" "h3ab0da6aga36dg4861g906egff10a4c63cc8;3"
data "Icon" "PassiveFeature_CuttingWords"
data "InterruptContext" "OnPostRoll"
data "InterruptContextScope" "Nearby"
data "InterruptFlags" "InterruptWhileInvisible"
data "Container" "YesNoDecision"
data "Conditions" "IsAbleToReact(context.Observer) and ((HasInterruptedAttack() and Enemy(context.Source,context.Observer) and CanSee(context.Source,context.Observer) and IsFlatValueInterruptInteresting(4, context.Source)) or (HasInterruptedSavingThrow() and Enemy(context.Target,context.Observer) and IsFlatValueInterruptInteresting(4))) and not AnyEntityIsItem()"
data "Properties" "AdjustRoll(OBSERVER_OBSERVER,0-1d4);ApplyStatus(OBSERVER_SOURCE,INTERRUPT_CUTTING_WORDS_TARGET,100,0);ApplyStatus(OBSERVER_OBSERVER,INTERRUPT_CUTTING_WORDS,100,0);IF(not Self(context.Target, context.Observer)):UseSpell(OBSERVER_SOURCE,Target_CuttingWords,true,true,true)"
data "Cost" "ReactionActionPoint:1"
data "InterruptDefaultValue" "Ask;Enabled"
data "EnableCondition" "not HasStatus('SG_Polymorph_BeastShape') and not HasStatus('SG_Blinded')"
data "EnableContext" "OnStatusApplied;OnStatusRemoved"
data "Stack" "AllyAboutBeHit"
