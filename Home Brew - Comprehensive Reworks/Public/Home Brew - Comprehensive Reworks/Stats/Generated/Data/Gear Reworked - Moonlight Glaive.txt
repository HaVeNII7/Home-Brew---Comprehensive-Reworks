new entry "MAG_Moonlight_Glaive"
type "Weapon"
using "WPN_Glaive_1"
data "RootTemplate" "24f276e7-f08f-44f1-ab97-3df34fd52add"
data "ValueUUID" "9b6a4ab2-323b-4030-89ab-030252bb6214"
data "Rarity" "Rare"
data "DefaultBoosts" "Tag(ORI_GALE_CONSUMABLEARTEFACT);WeaponEnchantment(1);WeaponDamage(1d6, Radiant)"
data "BoostsOnEquipMainHand" "UnlockSpell(Shout_Steady);UnlockSpell(Target_OpeningAttack);UnlockSpell(Target_PolearmMaster_BonusAttack);UnlockSpell(Target_MAG_WeaponAction_MoonlightButterfly)"
data "PassivesOnEquip" "MAG_Light_MoonlightGlaive_Passive"
data "Unique" "1"
data "UseCosts" "ReactionActionPoint:1;Attunement:2"
data "StatusOnEquip" "ATTUNEMENT2"

new entry "MAG_Light_MoonlightGlaive_Passive"
type "PassiveData"
data "Icon" "PassiveFeature_Generic_Tactical"
using "MAG_Light_FarlinDagger_Passive"
data "DisplayName" "hddc19688gfbffg473cgbdeeg606fc4f261a2;2"
data "Description" "h2fa83a4dg3b80g4eeeg818fg22dd2f5d6d84;2"
data "DescriptionParams" "Distance(9);DealDamage(1d4, Radiant)"
data "ToggleOnFunctors" "IF(HasStatus('MAG_MOONLIGHT_GLAIVE_LIGHT_TECHNICAL', GetItemInEquipmentSlot(EquipmentSlot.MeleeMainHand, context.Source))):ApplyEquipmentStatus(MeleeMainHand, MAG_LIGHT_DIVINE2, 100, -1);IF(HasStatus('MAG_MOONLIGHT_GLAIVE_LIGHT_TECHNICAL', GetItemInEquipmentSlot(EquipmentSlot.MeleeOffHand, context.Source))):ApplyEquipmentStatus(MeleeOffHand, MAG_LIGHT_DIVINE2, 100, -1)"
data "ToggleOffFunctors" "IF(HasStatus('MAG_LIGHT_DIVINE2', GetItemInEquipmentSlot(EquipmentSlot.MeleeMainHand, context.Source)) and HasStatus('MAG_MOONLIGHT_GLAIVE_LIGHT_TECHNICAL', GetItemInEquipmentSlot(EquipmentSlot.MeleeMainHand, context.Source))):ApplyEquipmentStatus(MeleeMainHand, MAG_MAGIC_ITEM_LIGHT_REMOVER, 100, 0);IF(HasStatus('MAG_LIGHT_DIVINE2', GetItemInEquipmentSlot(EquipmentSlot.MeleeOffHand, context.Source)) and HasStatus('MAG_MOONLIGHT_GLAIVE_LIGHT_TECHNICAL', GetItemInEquipmentSlot(EquipmentSlot.MeleeOffHand, context.Source))):ApplyEquipmentStatus(MeleeOffHand, MAG_MAGIC_ITEM_LIGHT_REMOVER, 100, 0)"
data "DescriptionParams" "Distance(9)"

new entry "MAG_LIGHT_DIVINE2"
type "StatusData"
data "StatusType" "BOOST"
using "LIGHT"
data "DescriptionParams" "Distance(9)"
data "Boosts" "GameplayLight(9,false,0.1)"
data "StatusPropertyFlags" "IgnoreResting;DisableCombatlog"
data "StatusGroups" "SG_Light"
data "StatusEffect" "7318e3cf-fd8d-4383-bfe4-342078649edb"

new entry "Target_MAG_WeaponAction_MoonlightButterfly"
type "SpellData"
data "SpellType" "Target"
using "Target_Slash_New"
data "SpellSuccess" "TARGET:GROUND:Summon(5d2efb42-800a-4d6f-b239-db98790ea70b, 3,,,,MAG_MOONLIGHT_BUTTERFLY_AURA);DealDamage(MainMeleeWeapon+ProficiencyBonus, MainMeleeWeaponDamageType);DealDamage(ProficiencyBonus, Psychic);ExecuteWeaponFunctors(MainHand)"
data "Icon" "Action_Mag_MoonlightButterfly"
data "DisplayName" "hd4005646g21f9g4c3egae5bgf575a364f88f;3"
data "Description" "h26ed1a09g9360g4ed3g91e8g0e26b3e422ef;5"
data "DescriptionParams" "DealDamage(1d6, Psychic)"
data "ExtraDescription" "hb1d6d80cgedf7g4b1cg8ba4gd883b4a93499;1"
data "ExtraDescriptionParams" "DealDamage(1d6, Psychic)"
data "TooltipAttackSave" "MeleeWeaponAttack"
data "TooltipStatusApply" ""
data "RequirementConditions" "not HasStatus('SG_Polymorph_BeastShape')"

new entry "CONSUMED_MOONLIGHTGLAIVE"
type "StatusData"
data "StatusType" "BOOST"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator;ApplyToDead;IgnoreResting"
data "TickType" "EndTurn"
data "Boosts" "ActionResource(Attunement,0,0);IF(Tagged('FRONTIER_KNIGHT', context.Source)):UnlockSpell(Target_MAG_WeaponAction_MoonlightButterfly)"
