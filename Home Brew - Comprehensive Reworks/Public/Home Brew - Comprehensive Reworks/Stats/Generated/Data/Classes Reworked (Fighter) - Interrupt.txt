<!--FIGHTER-->

new entry "Interrupt_Indomitable"
type "InterruptData"
data "DisplayName" "h79964f79ga693g48e9g8e0egf3027f2f465d;2"
data "Description" "hed0a51b0g8311g4f2cgbd98g0687fc74dee2;2"
data "Icon" "PassiveFeature_Indomitable"
data "InterruptContext" "OnPostRoll"
data "InterruptContextScope" "Self"
data "InterruptFlags" "InterruptWhileInvisible"
data "Container" "YesNoDecision"
data "Conditions" "not Dead(context.Observer) and HasInterruptedSavingThrow() and Self(context.Observer,context.Target) and not AnyEntityIsItem() and IsRerollInterruptInteresting()"
data "Properties" "SetReroll(19,true)"
data "Cost" "ReactionActionPoint:1"
data "InterruptDefaultValue" "Ask;Enabled"
data "Stack" "OnSave"

<!--FRONTIER KNIGHT-->

new entry "Interrupt_SteadfastOnslaught"
type "InterruptData"
data "DisplayName" "hd8a8ad84g4f65g46fdgb04dg5bff8k39dlf0;1"
data "Description" "h23701712ge994g40bfga729g36ff5d8f4dff;2"
data "DescriptionParams" "DealDamage(LevelMapValue(SuperiorityDie),MainMeleeWeaponDamageType)"
data "Icon" "PassiveFeature_MartialAdept"
data "InterruptContext" "OnCastHit"
data "InterruptContextScope" "Self"
data "InterruptFlags" "InterruptWhileInvisible"
data "Container" "YesNoDecision"
data "Conditions" "Self(context.Source,context.Observer) and HasDamageEffectFlag(DamageFlags.Hit) and not IsKillingBlow() and (SpellId('Target_PostureBreaker_Frontier') or SpellId('Zone_Cleave_Frontier') or SpellId('Target_ConcussiveSmash_Frontier') or SpellId('Target_CripplingStrike_Frontier') or SpellId('Target_DisarmingStrike_Frontier') or SpellId('Target_OpeningAttack_Frontier') or SpellId('Target_HeartStopper_Frontier') or SpellId('Target_Slash_New_Frontier') or SpellId('Target_PiercingThrust_Frontier') or SpellId('Target_PommelStrike_Frontier') or SpellId('Rush_SpringAttack_Frontier') or SpellId('Target_Topple_Frontier') or SpellId('Target_HinderingSmash_Frontier') or SpellId('Projectile_HamstringShot_Frontier') or SpellId('Projectile_MobileShooting_Frontier') or SpellId('Projectile_PiercingShot_Frontier')) and not AnyEntityIsItem()"
data "Properties" "DealDamage(LevelMapValue(SuperiorityDie), MainMeleeWeaponDamageType)"
data "Cost" "SuperiorityDie:1"
data "InterruptDefaultValue" "Ask;Enabled"
data "EnableCondition" "HasActionResource('SuperiorityDie',1,0,false,false,context.Source) and not HasStatus('SG_Polymorph_BeastShape')"
data "EnableContext" "OnActionResourcesChanged;OnStatusRemoved;OnStatusApplied"
data "Stack" "OnDamage"

<!--PASSIVES-->

new entry "Interrupt_Challengers_Call"
type "InterruptData"
data "DisplayName" "439cb1c55ce44da8b8f3ccd2e23204f5000z2;1"
data "Description" "439cb1c55ce44da8b8f3ccd2e23204f5000zb;2"
data "DescriptionParams" "Distance(9);Distance(9)"
data "Icon" "Action_CommandingPresence"
data "InterruptContext" "OnPreDamage"
data "InterruptContextScope" "Nearby"
data "InterruptFlags" "InterruptWhileInvisible"
data "Container" "YesNoDecision"
data "Conditions" "IsAbleToReact(context.Observer) and Enemy(context.Source,context.Observer) and CanSee(context.Source,context.Observer) and not Self(context.Target,context.Observer) and Ally(context.Target, context.Observer) and HasHPPercentageLessThan(50, context.Target, context.Observer) and not DistanceToEntityGreaterThan(9, context.ObserverPosition, context.Target) and not AnyEntityIsItem()"
data "Properties" "UseSpell(OBSERVER_SOURCE,Projectile_Challengers_Call,true,true,true)"
data "Cost" "ReactionActionPoint:1"
data "InterruptDefaultValue" "Ask;Enabled"
data "EnableCondition" "not HasStatus('SG_Blinded')"
data "EnableContext" "OnStatusRemoved;OnStatusApplied"

new entry "Interrupt_Intuitive_Warning"
type "InterruptData"
data "DisplayName" "439cb1c55ce44da8b8f3ccd2e23204f5000z7;1"
data "Description" "439cb1c55ce44da8b8f3ccd2e23204f5000zg;1"
data "DescriptionParams" "Distance(9.0)"
data "Icon" "Action_TacticalAssessment"
data "InterruptContext" "OnPostRoll"
data "InterruptContextScope" "Nearby"
data "InterruptFlags" "InterruptWhileInvisible"
data "Container" "YesNoDecision"
data "Conditions" "IsAbleToReact(context.Observer) and not Self(context.Source,context.Observer) and CanSee(context.Source,context.Observer) and not Self(context.Target,context.Observer) and Ally(context.Target, context.Observer) and HasInterruptedAttack() and not DistanceToEntityGreaterThan(9.0, context.ObserverPosition, context.Target) and not AnyEntityIsItem() and IsRerollInterruptInteresting(context.Source) and not InterruptHasDisadvantage()"
data "Properties" "SetDisadvantage();ApplyStatus(OBSERVER_TARGET,INTERRUPT_FIGHTINGSTYLE_PROTECTION,100,0)"
data "Cost" "ReactionActionPoint:1"
data "InterruptDefaultValue" "Ask;Enabled"
data "EnableCondition" "not HasStatus('SG_Polymorph_BeastShape') and not HasStatus('SG_Blinded')"
data "EnableContext" "OnStatusRemoved;OnStatusApplied"
data "Stack" "AllyAboutBeHit"

new entry "Interrupt_Proper_Form"
type "InterruptData"
data "DisplayName" "439cb1c55ce44da8b8f3ccd2e23204f500z16;1"
data "Description" "439cb1c55ce44da8b8f3ccd2e23204f5000zp;1"
data "Icon" "PassiveFeature_Parry"
data "InterruptContext" "OnPreDamage"
data "InterruptContextScope" "Self"
data "InterruptFlags" "InterruptWhileInvisible"
data "Conditions" "IsAbleToReact(context.Observer) and Self(context.Target,context.Observer) and IsAttack() and HasDamageEffectFlag(DamageFlags.Hit) and not HasStatus('SG_Blinded') and not HasStatus('SG_Prone') and not HasStatus('SG_Incapacitated')"
data "Properties" "AdjustRoll(-1d4*ProficiencyBonus)"
data "Cost" "ReactionActionPoint:1"
data "InterruptDefaultValue" "Ask;Enabled"
data "EnableCondition" "not HasStatus('SG_Polymorph_BeastShape') and not HasStatus('SG_Blinded')"
data "EnableContext" "OnStatusRemoved;OnStatusApplied"
data "Stack" "SelfAboutBeHit"

new entry "Interrupt_Sentinels_Protection"
type "InterruptData"
data "DisplayName" "439cb1c55ce44da8b8f3ccd2e23204f500z18;1"
data "Description" "439cb1c55ce44da8b8f3ccd2e23204f5000zr;1"
data "DescriptionParams" "Distance(3)"
data "Icon" "PassiveFeature_FightingStyle_Defense"
data "InterruptContext" "OnPreDamage"
data "InterruptContextScope" "Nearby"
data "InterruptFlags" "InterruptWhileInvisible"
data "Container" "YesNoDecision"
data "Conditions" "IsAbleToReact(context.Observer) and not Self(context.Source,context.Observer) and CanSee(context.Source,context.Observer) and not Self(context.Target,context.Observer) and Ally(context.Target, context.Observer) and not DistanceToEntityGreaterThan(3, context.ObserverPosition, context.Target) and not AnyEntityIsItem()"
data "Properties" "AdjustRoll(OBSERVER_TARGET,-(1d4*ProficiencyBonus));ApplyStatus(OBSERVER_TARGET,INTERRUPT_FIGHTINGSTYLE_INTERCEPTION,100,0)"
data "Cost" "ReactionActionPoint:1"
data "InterruptDefaultValue" "Ask;Enabled"
data "EnableCondition" "not HasStatus('SG_Polymorph_BeastShape') and not HasStatus('SG_Blinded')"
data "EnableContext" "OnStatusRemoved;OnStatusApplied"
data "Stack" "AllyAboutBeHit"

<!--MANEUVERS-->

new entry "Interrupt_Brace"
type "InterruptData"
data "DisplayName" "h4f9fd43eg1f44g41aegb9b8g517b17ba1d2a;1"
data "Description" "hc58760f8ga6afg4f5fg8d54gfd32677b7064;1"
data "Icon" "Passive_Brace"
data "InterruptContext" "OnEnterAttackRange"
data "InterruptContextScope" "Self"
data "InterruptFlags" "InterruptWhileInvisible"
data "Container" "YesNoDecision"
data "Conditions" "IsAbleToReact(context.Observer) and Self(context.Observer, context.Source) and not WieldingWeapon('Ammunition', false, false, context.Observer) and not Unarmed(context.Observer) and Enemy() and not HasStatus('SG_Invisible',context.Target) and not HasStatus('SG_Incapacitated', context.Source) and not HasStatus('SG_Unconscious', context.Source) and not (not Player(context.Source) and Tagged('AI_IGNORED_TARGET')  and not HasStatus('GNOLL_SUDDENRUSH')) and not HasStatus('SHOCKWAVE') and not (HasStatus('MOBILE_NO_AOO', context.Source) and HasStatus('MOBILE_NO_AOO_SOURCE', context.Target)) and not HasStatus('FLAMING_SPHERE_AURA') and not HasStatus('SNEAKING',context.Target) and not HasStatus('SG_Ignore_AOO',context.Target) and not AnyEntityIsItem()"
data "Properties" "IF(not HasPassive('DualWielder', context.Observer) or (HasPassive('DualWielder', context.Observer) and not HasPassive('Offhand_Dual_Wield', context.Observer))):UseSpell(Target_MainHandAttack_Superiority,true,true,true);IF(HasPassive('DualWielder', context.Observer) or HasPassive('Natural_Opportunity', context.Observer)) and HasPassive('Offhand_Dual_Wield', context.Observer)):UseSpell(Target_OffhandAttack_Superiority,true,true,true)"
data "Cost" "ReactionActionPoint:1;SuperiorityDie:1"
data "InterruptDefaultValue" "Ask;Enabled"
data "EnableCondition" "not HasStatus('SG_Polymorph_BeastShape') and not HasStatus('SG_Blinded')"
data "EnableContext" "OnStatusRemoved;OnStatusApplied"
data "Stack" "OnEnterRange"

new entry "Interrupt_Riposte"
type "InterruptData"
data "DisplayName" "h8206f7fbg6fa5g4ceeg9411gbbb7ec7e11e8;1"
data "Description" "h29c21e7bg1694g40bbg9ffdg7de76393c235;3"
data "Icon" "PassiveFeature_Riposte"
data "InterruptContext" "OnCastHit"
data "InterruptContextScope" "Self"
data "InterruptFlags" "InterruptWhileInvisible"
data "Container" "YesNoDecision"
data "Conditions" "IsAbleToReact(context.Observer) and not Unarmed(context.Observer) and Enemy(context.Source,context.Observer) and CanSee(context.Source,context.Observer) and IsMiss() and not HasStatus('SG_Invisible',context.Source) and not AnyEntityIsItem() and HasLastAttackTriggered() and ((not DistanceToEntityGreaterThan(2, context.ObserverPosition, context.Source) and not WieldingWeapon('Ammunition', false, false, context.Observer)) or (not DistanceToEntityGreaterThan(18, context.ObserverPosition, context.Source) and WieldingWeapon('Ammunition', false, false, context.Observer) and not HasPassive('Concealed_Carry_Description', context.Source) and not HasPassive('Offhand_Dual_Wield_Ranged', context.Source)) or (not DistanceToEntityGreaterThan(9, context.ObserverPosition, context.Source) and WieldingWeapon('Ammunition', false, false, context.Observer) and HasPassive('Concealed_Carry_Description', context.Source) and not HasPassive('Offhand_Dual_Wield_Ranged', context.Source)) or (not DistanceToEntityGreaterThan(9, context.ObserverPosition, context.Source) and WieldingWeapon('Ammunition', false, false, context.Observer) and HasPassive('Concealed_Carry_Description', context.Source) and HasPassive('Offhand_Dual_Wield_Ranged', context.Source)))"
data "Properties" "IF(not DistanceToEntityGreaterThan(2, context.ObserverPosition, context.Source) and not WieldingWeapon('Ammunition', false, false, context.Observer) and (not HasPassive('DualWielder', context.Observer) or HasPassive('DualWielder', context.Observer) and not HasPassive('Offhand_Dual_Wield', context.Observer))):UseSpell(SWAP,Target_MainHandAttack_Superiority,true,true,true);IF(not DistanceToEntityGreaterThan(2, context.ObserverPosition, context.Source) and not WieldingWeapon('Ammunition', false, false, context.Observer) and (HasPassive('DualWielder', context.Observer) or HasPassive('Natural_Opportunity', context.Observer)) and HasPassive('Offhand_Dual_Wield', context.Observer)):UseSpell(SWAP,Target_OffhandAttack_Superiority,true,true,true);IF(not DistanceToEntityGreaterThan(18, context.ObserverPosition, context.Source) and WieldingWeapon('Ammunition', false, false, context.Observer) and (not HasPassive('DualWielder', context.Observer) or HasPassive('DualWielder', context.Observer) and not (HasPassive('Concealed_Carry_Description', context.Observer) or HasPassive('LowRange_Firearm_Passive', context.Observer) or HasPassive('MidRange_Firearm_Passive', context.Observer) or HasPassive('HighRange_Firearm_Passive', context.Observer)))):UseSpell(SWAP,Projectile_MainHandAttack_Superiority,true,true,true);IF(not DistanceToEntityGreaterThan(9, context.ObserverPosition, context.Source) and WieldingWeapon('Ammunition', false, false, context.Observer) and (not HasPassive('DualWielder', context.Observer) or HasPassive('DualWielder', context.Observer) and HasPassive('Concealed_Carry_Description', context.Observer))):UseSpell(SWAP,Projectile_MainHandAttack_Superiority,true,true,true);IF(not DistanceToEntityGreaterThan(9, context.ObserverPosition, context.Source) and WieldingWeapon('Ammunition', false, false, context.Observer) and (HasPassive('DualWielder', context.Observer) or HasPassive('Natural_Opportunity', context.Observer)) and HasPassive('Offhand_Dual_Wield_Ranged', context.Observer)):UseSpell(SWAP,Projectile_OffhandAttack_Superiority,true,true,true);IF(not DistanceToEntityGreaterThan(9, context.ObserverPosition, context.Source) and WieldingWeapon('Ammunition', false, false, context.Observer) and HasPassive('LowRange_Firearm_Passive', context.Observer)):UseSpell(OBSERVER_SOURCE,Projectile_MainHandAttack_Blunderbuss,true,true,true);IF(not DistanceToEntityGreaterThan(18, context.ObserverPosition, context.Source) and WieldingWeapon('Ammunition', false, false, context.Observer) and (HasPassive('MidRange_Firearm_Passive', context.Observer)):UseSpell(OBSERVER_SOURCE,Projectile_MainHandAttack_Flintlock,true,true,true);IF(not DistanceToEntityGreaterThan(36, context.ObserverPosition, context.Source) and WieldingWeapon('Ammunition', false, false, context.Observer) and HasPassive('HighRange_Firearm_Passive', context.Observer)):UseSpell(OBSERVER_SOURCE,Projectile_MainHandAttack_Musket,true,true,true)"
data "Cost" "ReactionActionPoint:1;SuperiorityDie:1"
data "InterruptDefaultValue" "Ask;Enabled"
data "EnableCondition" "not HasStatus('SG_Polymorph_BeastShape') and not HasStatus('SG_Blinded')"
data "EnableContext" "OnStatusRemoved;OnStatusApplied"
data "Stack" "OnDodge"
