<!--ROGUE-->

new entry "SneakAttack_Unlock"
type "PassiveData"
data "DisplayName" "hc4558204g2c77g4b58gafb6g0ba6b396a845;1"
data "Description" "h098941ccgc4ecg49f2gb22agabed0b019567;4"
data "DescriptionParams" "DealDamage(LevelMapValue(SneakAttack),MainMeleeWeaponDamageType);Distance(1.5)"
data "ExtraDescription" "h76d95144gbf2eg4c33gae0bg9661d52519e1;1"
data "Icon" "Action_SneakAttack_Melee"
data "Properties" "Highlighted;ForceShowInCC"
data "Boosts" "UnlockInterrupt(CInterrupt_SneakAttack)"

new entry "SneakAttack_Unlock_Magic"
type "PassiveData"
data "DisplayName" "hd8a8ad84g4f65g46fdgb04dg5b91dafss5f8;1"
data "Description" "h23701712ge994g40bfga729g36dc38dss354;4"
data "DescriptionParams" "DealDamage(LevelMapValue(SneakAttack),MainMeleeWeaponDamageType);Distance(1.5);DealDamage(LevelMapValue(SneakAttack),Force)"
data "ExtraDescription" "h76d95144gbf2eg4c33gae0bg9661d52519e1;1"
data "Icon" "Action_SneakAttack_Melee"
data "Properties" "Highlighted;ForceShowInCC"
data "Boosts" "UnlockInterrupt(CInterrupt_SneakAttack_Magic)"

new entry "Lucky_Rogue_Abilities"
type "PassiveData"
data "DisplayName" "hc4558204g2c77g4b58gafb6g0ba6b39fsdff;1"
data "Description" "h098941ccgc4ecg49f2gb22agabed0b6asdf8;2"
data "Icon" "PassiveFeature_Lucky_RollAdditionalDie"
data "EnabledConditions" "HasActionResource('LuckPoint', 1, 0, false, false, context.Source)"
data "EnabledContext" "OnLongRest;OnActionResourcesChanged;OnStatusApplied;OnStatusRemoved"
data "Properties" "Highlighted;IsToggled;ToggledDefaultAddToHotbar"
data "Boosts" "Advantage(AllAbilities)"
data "StatsFunctorContext" "OnAbilityCheck"
data "StatsFunctors" "UseActionResource(SELF,LuckPoint,1,0)"
data "ToggleOnEffect" "VFX_Spells_Cast_Sorcerer_TidesOfChaos_BodyFX_01:Dummy_BodyFX:;VFX_Spells_Cast_Sorcerer_Shout_EyeFX_01:Dummy_EyeFX_01:;VFX_Spells_Cast_Sorcerer_Shout_EyeFX_02:Dummy_EyeFX_02:;"

new entry "Lucky_Rogue_AttackRolls"
type "PassiveData"
data "DisplayName" "h6bcc3d81g5543g47fcg8f0eg863a3211b2b5;1"
data "Description" "h6336890cg6505g4cd5ga18fg0f06e532eb37;4"
data "Icon" "PassiveFeature_PeaceBreaker"
data "EnabledConditions" "HasActionResource('LuckPoint', 1, 0, false, false, context.Source)"
data "EnabledContext" "OnLongRest;OnActionResourcesChanged;OnStatusApplied;OnStatusRemoved"
data "Properties" "Highlighted;IsToggled;ToggledDefaultAddToHotbar"
data "Boosts" "Disadvantage(AttackTarget);Advantage(AttackRoll)"
data "ToggleOnEffect" "VFX_Spells_Cast_Sorcerer_TidesOfChaos_BodyFX_01:Dummy_BodyFX:;VFX_Spells_Cast_Sorcerer_Shout_EyeFX_01:Dummy_EyeFX_01:;VFX_Spells_Cast_Sorcerer_Shout_EyeFX_02:Dummy_EyeFX_02:;"

new entry "Lucky_Rogue_Attack_Fixer"
type "PassiveData"
data "DisplayName" "h6bcc3d81g5543g47fcg8f0eg863a3211b2b5;1"
data "Description" "h6336890cg6505g4cd5ga18fg0f06e532eb37;4"
data "Icon" "PassiveFeature_PeaceBreaker"
data "Properties" "IsHidden;OncePerTurn"
data "StatsFunctorContext" "OnDamage"
data "StatsFunctors" "IF(HasPassive('Lucky_Rogue_AttackRolls', context.Source)):UseActionResource(SELF,LuckPoint,1,0)"

new entry "Lucky_Rogue_Attacked_Fixer"
type "PassiveData"
data "DisplayName" "h6bcc3d81g5543g47fcg8f0eg863a3211b2b5;1"
data "Description" "h6336890cg6505g4cd5ga18fg0f06e532eb37;4"
data "Icon" "PassiveFeature_PeaceBreaker"
data "Properties" "IsHidden"
data "StatsFunctorContext" "OnDamaged"
data "Conditions" "Character() and not Self()"
data "StatsFunctors" "IF(HasPassive('Lucky_Rogue_AttackRolls', context.Target)):UseActionResource(LuckPoint,1,0)"

new entry "Nimble_Movement"
type "PassiveData"
data "DisplayName" "d3e15e63749c4b62b8e7760cc707412a6asfd;1"
data "Description" "d3e15e63749c4b62b8e7760cc70741209sd09;2"
data "Icon" "Action_SupremeSneak"
data "Properties" "Highlighted;IsToggled;ToggledDefaultOn;ToggledDefaultAddToHotbar"
data "Boosts" "UnlockSpellVariant(SpellId('Shout_Dash'),ModifyUseCosts(Replace,ActionPoint,0,-1,ActionPoint),ModifyUseCosts(Add,BonusActionPoint,1,0));UnlockSpellVariant(SpellId('Shout_Disengage'),ModifyUseCosts(Replace,ActionPoint,0,-1,ActionPoint),ModifyUseCosts(Add,BonusActionPoint,1,0));UnlockSpellVariant(SpellId('Shout_Hide'),ModifyUseCosts(Replace,ActionPoint,0,-1,ActionPoint),ModifyUseCosts(Add,BonusActionPoint,1,0));UnlockSpellVariant(SpellId('Projectile_CunningFangs'),ModifyUseCosts(Replace,ActionPoint,0,-1,ActionPoint),ModifyUseCosts(Add,BonusActionPoint,1,0))"
data "ToggleGroup" "RogueMovement"

new entry "LuckyToss"
type "PassiveData"
data "DisplayName" "hc4558204g2c77g4b58gafb6g0ba6b399ja83;1"
data "Description" "h098941ccgc4ecg49f2gb22agabed0b01ofk9;4"
data "Icon" "Action_TossACoin"
data "Properties" "Highlighted;ForceShowInCC"
data "StatsFunctorContext" "OnTurn"
data "StatsFunctors" "IF(not HasPassive('WhatGoesAround', context.Source) and RollDieAgainstDC(DiceType.d4,3)):RestoreResource(LuckPoint, 1, 0);IF(HasPassive('WhatGoesAround', context.Source)):RestoreResource(LuckPoint, 1, 0)"

new entry "SneakAttack_Upgrade"
type "PassiveData"
data "DisplayName" "hc4558204g2c77g4b58gafb6g0ba6b3912779;1"
data "Description" "h098941ccgc4ecg49f2gb22agabed0b06a922;4"
data "Icon" "Action_SneakAttack_Melee"
data "Properties" "Highlighted;ForceShowInCC"

new entry "UncannyDodge"
type "PassiveData"
data "DisplayName" "hc4558204g2c77g4b58gafb6g0ba6b396a921;1"
data "Description" "h098941ccgc4ecg49f2gb22agabed0b03a621;4"
data "Icon" "PassiveFeature_UncannyDodge"
data "Properties" "Highlighted;ForceShowInCC"
data "Boosts" "UnlockInterrupt(Interrupt_UncannyDodge)"

new entry "SneakAttack_Upgrade2"
type "PassiveData"
data "DisplayName" "hc4558204g2c77g4b58gafb6g0ba6b3938989;1"
data "Description" "h098941ccgc4ecg49f2gb22agabed0blopoi7;4"
data "Icon" "Action_SneakAttack_Melee"
data "Properties" "Highlighted;ForceShowInCC"

<!--ARCANE TRICKSTER-->

new entry "ArcaneTrickery"
type "PassiveData"
data "DisplayName" "hdb24b7c0g74dag4e54gb7a3gac62e6a68522;1"
data "Description" "h25b27b77g4bc8g4944g881bg9f10basdf558;4"
data "Icon" "PassiveFeature_IllusorySelf"
data "Properties" "Highlighted;ForceShowInCC"
data "Boosts" "UnlockSpellVariant(IsSpell(),ModifySpellFlags(Stealth,1))"

new entry "BlessingoftheTrickster"
type "PassiveData"
data "DisplayName" "hae3fe1d9geac1g4c8bga1ceg4c711da0beba;1"
data "Description" "hdb24b7c0g74dag4e54gb7a3gac62ec5ca246;4"
data "Icon" "PassiveFeature_IllusorySelf"
data "Properties" "Highlighted;ForceShowInCC"
data "Boosts" "UnlockSpell(Target_BlessingOfTheTrickster)"

new entry "TrickoftheLight"
type "PassiveData"
data "DisplayName" "hdb24b7c0g74dag4e54gb7a3gac6a6666a248;1"
data "Description" "h25b27b77g4bc8g4944g881bg9f66699a8d21;4"
data "Icon" "PassiveFeature_IllusorySelf"
data "Properties" "Highlighted;ForceShowInCC;OncePerCombat"
data "StatsFunctorContext" "OnCombatStarted;OnTurn"
data "Conditions" "Combat()"
data "StatsFunctors" "ApplyStatus(SELF,TRICKOFTHELIGHT,100,-1)"

new entry "TrickoftheLight_Damaged"
type "PassiveData"
data "DisplayName" "hdb24b7c0g74dag4e54gb7a3gac6a6666a248;1"
data "Description" "h25b27b77g4bc8g4944g881bg9f66699a8d21;4"
data "Icon" "PassiveFeature_IllusorySelf"
data "Properties" "IsHidden"
data "StatsFunctorContext" "OnDamaged"
data "StatsFunctors" "RemoveStatus(TRICKOFTHELIGHT);ApplyStatus(TRICKOFTHELIGHT_DAMAGED,100,3)"

new entry "EtherealCaster"
type "PassiveData"
data "DisplayName" "hdb24b7c0g74dag4e54gb7a3adsfd3ad512ff;1"
data "Description" "h25b27b77g4bc8g4944g881bg9f6a9da99898;4"
data "Icon" "PassiveFeature_IllusorySelf"
data "Properties" "Highlighted;ForceShowInCC;OncePerTurn"
data "StatsFunctorContext" "OnStatusApplied"
data "Conditions" "HasAnyStatus({'SG_Invisible'})"
data "StatsFunctors" "IF(not HasStatus('ETHEREALCASTER')):ApplyStatus(SELF,ETHEREALCASTER,100,-1)"

new entry "MagicalAmbush"
type "PassiveData"
data "DisplayName" "h3b2b5d8agc531g4cb9g98b4g63c0e5637811;1"
data "Description" "hc724a06agbd46g40e5gbdb0gbf6721f146a5;4"
data "Icon" "PassiveFeature_IllusorySelf"
data "Properties" "Highlighted;ForceShowInCC"
data "Boosts" "UnlockSpell(Target_ArcaneAmbush)"

new entry "ElusiveCasting"
type "PassiveData"
data "DisplayName" "hdb24b7c0g74dag4e54gb7a3gac3a3ad512ff;1"
data "Description" "h25b27b77g4bc8g4944g881bg9fasfda99898;4"
data "Icon" "PassiveFeature_IllusorySelf"
data "Properties" "Highlighted;ForceShowInCC"
data "StatsFunctorContext" "OnTurn"
data "Conditions" "not HasAnyStatus({'SG_Invisible'})"
data "StatsFunctors" "ApplyStatus(SELF,INVISIBLE, 100, 1)"

<!--ASSASSIN-->

new entry "Assassinate"
type "PassiveData"
data "DisplayName" "h653597fcg1942g4ce1gaefag1ecf2fa01d4b;2"
data "Description" "h853b555ege835g49e1g9e27g74680e24aef5;4"
data "Icon" "Action_InfiltrationExpertise"
data "Properties" "Highlighted;ForceShowInCC;DisplayBoostInTooltip;OncePerTurn"
data "StatsFunctorContext" "OnDamage"
data "Conditions" "not Combat(context.Source) and not Self() and not Ally() and HasStatus('SNEAKING', context.Source) and not HasStatus('ASSASSINATE_BLOCK', context.Target) or not Combat(context.Source) and not Self() and not Ally() and HasStatus('SG_Invisible', context.Source) and not HasStatus('ASSASSINATE_BLOCK', context.Target)"
data "StatsFunctors" "DealDamage((Level*6), MainMeleeWeaponDamageType,,,0,,true);ApplyStatus(ASSASSINATE_BLOCK,100,1)"
data "Boosts" "IF(Combat(context.Source) and Combat() and not HadTurnInCombat()):Advantage(AttackRoll)"

new entry "Assassinate_Resource"
type "PassiveData"
data "DisplayName" "h653597fcg1942g4ce1gaefag1ecf2fa01d4b;1"
data "Description" "h853b555ege835g49e1g9e27g74680e24aef5;4"
data "Icon" "Action_InfiltrationExpertise"
data "Properties" "IsHidden;OncePerCombat"
data "StatsFunctorContext" "OnTurn"
data "StatsFunctors" "RestoreResource(BonusActionPoint, 100%, 0);RestoreResource(ActionPoint, 100%, 0)"

new entry "AssassinsFocus"
type "PassiveData"
data "DisplayName" "hc4558204g2c77g4b58gafb6g0ba6b394a584;1"
data "Description" "h098941ccgc4ecg49f2gb22agabed0b093kff;2"
data "Properties" "IsHidden"
data "Icon" "Action_InfiltrationExpertise"
data "StatsFunctorContext" "OnTurn"
data "StatsFunctors" "IF(not HasStatus('ASSASSINATION', context.Source) and Combat()):ApplyStatus(SELF,ASSASSINS_FOCUS,100,1);IF(not HasStatus('ASSASSINATION', context.Source) and Combat() and StatusGroupDurationEqualOrMoreThan(context.Source,'ASSASSINS_FOCUS',2)):RemoveStatus(ASSASSINS_FOCUS)"

new entry "AssassinsQuarry"
type "PassiveData"
data "DisplayName" "hc4558204g2c77g4b58gafb6g0ba6b394a584;1"
data "Description" "h098941ccgc4ecg49f2gb22agabed0b093kff;4"
data "Properties" "Highlighted;DisplayBoostInTooltip;IsToggled;ToggledDefaultOn;ToggledDefaultAddToHotbar"
data "Icon" "Action_InfiltrationExpertise"
data "EnabledConditions" "HasActionResource('AssassinsMark', 1, 0, false, false, context.Source)"
data "EnabledContext" "OnLongRest;OnActionResourcesChanged;OnStatusApplied;OnStatusRemoved"
data "ToggleOnEffect" "VFX_Spells_Cast_Sorcerer_TidesOfChaos_BodyFX_01:Dummy_BodyFX:;VFX_Spells_Cast_Sorcerer_Shout_EyeFX_01:Dummy_EyeFX_01:;VFX_Spells_Cast_Sorcerer_Shout_EyeFX_02:Dummy_EyeFX_02:;"
data "StatsFunctorContext" "OnDamage"
data "Conditions" "not HasStatus('ASSASSINATE_BLOCK', context.Target) and not Self() and not Ally() and IsWeaponAttack() and (HasDamageDoneForType(DamageType.Bludgeoning,context.Target) or HasDamageDoneForType(DamageType.Piercing,context.Target) or HasDamageDoneForType(DamageType.Slashing,context.Target))"
data "StatsFunctors" "DealDamage((Level*6), MainMeleeWeaponDamageType,,,0,,true);ApplyStatus(ASSASSINATE_BLOCK,100,1);RemoveStatus(SELF,ASSASSINS_FOCUS)"

new entry "AssassinsQuarry_Attack_Fixer"
type "PassiveData"
data "DisplayName" "hc4558204g2c77g4b58gafb6g0ba6b394a584;1"
data "Description" "h098941ccgc4ecg49f2gb22agabed0b093kff;4"
data "Icon" "Action_InfiltrationExpertise"
data "Properties" "IsHidden;OncePerTurn"
data "StatsFunctorContext" "OnDamage"
data "Conditions" "HasPassive('AssassinsQuarry', context.Source) and not Self() and not Ally() and IsWeaponAttack() and (HasDamageDoneForType(DamageType.Bludgeoning,context.Target) or HasDamageDoneForType(DamageType.Piercing,context.Target) or HasDamageDoneForType(DamageType.Slashing,context.Target)) and not IsKillingBlow()"
data "StatsFunctors" "UseActionResource(SELF,AssassinsMark,1,0);RemoveStatus(SELF,ASSASSINATION)"

new entry "AssassinsQuarry_CombatEnd_Fixer"
type "PassiveData"
data "DisplayName" "hc4558204g2c77g4b58gafb6g0ba6b394a584;1"
data "Description" "h098941ccgc4ecg49f2gb22agabed0b093kff;4"
data "Icon" "Action_InfiltrationExpertise"
data "Properties" "IsHidden;OncePerTurn"
data "StatsFunctorContext" "OnCombatEnded"
data "StatsFunctors" "UseActionResource(SELF,AssassinsMark,1,0);RemoveStatus(SELF,ASSASSINS_FOCUS);RemoveStatus(SELF,ASSASSINATION)"

new entry "Critical_Shock"
type "PassiveData"
data "DisplayName" "hc4558204g2c77g4b58ga69870ba6b394a584;1"
data "Description" "h098941ccgc4ecg49f2dfsd68abed0b093kff;4"
data "Icon" "Action_InfiltrationExpertise"
data "Properties" "Highlighted;ForceShowInCC"
data "Boosts" "IF(HasStatus('SURPRISED')):CriticalDamageOnHit()"

new entry "HiddenImplement"
type "PassiveData"
data "DisplayName" "hc4558204g2c77g4b58gafb6g0ba6b3948a22;1"
data "Description" "h098941ccgc4ecg49f2gb22agabed0b06a977;4"
data "Icon" "Action_InfiltrationExpertise"
data "Properties" "Highlighted;ForceShowInCC"
data "StatsFunctorContext" "OnDamage"
data "Conditions" "HasStatus('SNEAKING', context.Source) and not HasStatus('LOCKDOWN_CONDITION', context.Target) and not Self() and not Ally() or HasStatus('SG_Invisible', context.Source) and not HasStatus('LOCKDOWN_CONDITION', context.Target) and not Self() and not Ally()"
data "StatsFunctors" "IF(not SavingThrow(Ability.Wisdom, ManeuverSaveDC()) and not HasStatus('LOCKDOWN_CONDITION', context.Target)):ApplyStatus(SURPRISED,100,1)"

new entry "MarkedforBlood"
type "PassiveData"
data "DisplayName" "hc4558204g2c77g4b58gafb6g0ba6b399a654;1"
data "Description" "h098941ccgc4ecg49f2gb22agabed0b05a225;4"
data "Icon" "Action_InfiltrationExpertise"
data "Properties" "Highlighted;ForceShowInCC"
data "StatsFunctorContext" "OnDamage"
data "Conditions" "HasStatus('SNEAKING', context.Source) or HasStatus('SG_Invisible', context.Source)"
data "StatsFunctors" "ApplyStatus(ALERTED_IMMUNE,100,1)"

new entry "Execute"
type "PassiveData"
data "DisplayName" "hc4558204g2c77g4b58gafb6g0ba6b39adsdf;1"
data "Description" "h098941ccgc4ecg49f2gb22agabed0b0ewrff;4"
data "Icon" "Action_InfiltrationExpertise"
data "Properties" "Highlighted;ForceShowInCC"
data "StatsFunctorContext" "OnDamage"
data "StatsFunctors" "IF(HasHPPercentageWithoutTemporaryHPLessThan(20, context.Target)):Kill()"

<!--MERCENARY-->

new entry "Swash_Unlock"
type "PassiveData"
data "DisplayName" "hc28be462g2fd3g4877g8cadg6sd8f745493c;2"
data "Description" "hdd2d1cbbgaafdg4946gafdfgcdee5d845f1e;3"
data "Icon" "PassiveFeature_RelentlessAvenger"
data "Properties" "Highlighted;ForceShowInCC"
data "Boosts" "UnlockSpell(Target_DirtyTrick_Disarm);UnlockSpell(Target_DirtyTrick_Blind);UnlockSpell(Target_DirtyTrick_Vicious);UnlockSpell(Target_DirtyTrick_Panache)"

new entry "SneakAttackSwitch"
type "PassiveData"
data "DisplayName" "h34233a5agb50eg4820g9f10g3e21aa0000z1;1"
data "Description" "hba8f1eeeg12c1g43dag9a43g15d42b3000za;3"
data "DescriptionParams" "DealDamage(LevelMapValue(SneakAttack),MainMeleeWeaponDamageType)"
data "ExtraDescription" "h76d95144gbf2eg4c33gae0bg9661d52519e1;1"
data "Icon" "Action_SneakAttack_Melee"
data "Properties" "Highlighted;ForceShowInCC"
data "Boosts" "UnlockInterrupt(CInterrupt_SneakAttack_Rakish)"

new entry "RakishAudacity"
type "PassiveData"
data "DisplayName" "h34233a5agb50eg4820g9f10g3e21aa000001;1"
data "Description" "hba8f1eeeg12c1g43dag9a43g15d42b30000a;2"
data "DescriptionParams" "Distance(1.5)"
data "Icon" "PassiveFeature_RelentlessAvenger"
data "Properties" "Highlighted;ForceShowInCC"
data "Boosts" "IF(not ClassLevelHigherOrEqualThan(5,'Rogue') and Player()):Initiative(2);IF(ClassLevelHigherOrEqualThan(5,'Rogue') and not ClassLevelHigherOrEqualThan(9,'Rogue') and Player()):Initiative(3);IF(ClassLevelHigherOrEqualThan(9,'Rogue') and Player()):Initiative(4);IF(not CharacterLevelGreaterThan(4) and not Player()):Initiative(2);IF(CharacterLevelGreaterThan(4) and not CharacterLevelGreaterThan(8) and not Player()):Initiative(3);IF(CharacterLevelGreaterThan(8) and not Player()):Initiative(4)"

new entry "SeaLegs"
type "PassiveData"
data "DisplayName" "h34233a5agb50eg4820g9f10g3e21aa000002;1"
data "Description" "hba8f1eeeg12c1g43dag9a43g15d42b30000b;2"
data "Icon" "PassiveFeature_RelentlessAvenger"
data "Properties" "Highlighted;ForceShowInCC"
data "Boosts" "StatusImmunity(SG_Prone);RollBonus(SavingThrow, 100, Dexterity)"

new entry "DirtiestTricksIntheBook"
type "PassiveData"
data "DisplayName" "h34233a5agb50eg4820g9f10g3e21aa000005;1"
data "Description" "hba8f1eeeg12c1g43dag9a43g15d42b30000e;2"
data "DescriptionParams" "Distance(18)"
data "Icon" "PassiveFeature_RelentlessAvenger"
data "Properties" "Highlighted;ForceShowInCC"
data "Boosts" "UnlockSpellVariant(SpellId('Target_DirtyTrick_Blind'),ModifyNumberOfTargets(AdditiveBase,1,true));UnlockSpellVariant(SpellId('Target_DirtyTrick_Disarm'),ModifyNumberOfTargets(AdditiveBase,1,true));UnlockSpellVariant(SpellId('Target_DirtyTrick_Vicious'),ModifyNumberOfTargets(AdditiveBase,1,true));UnlockSpellVariant(SpellId('Target_DirtyTrick_Panache'),ModifyAreaRadius(Multiplicative,2));UnlockSpellVariant(SpellId('Target_DirtyTrick_StolenExplosives'),ModifyNumberOfTargets(AdditiveBase,1,true))"

<!--THIEF-->

new entry "EscapeArtist"
type "PassiveData"
data "DisplayName" "hc4558204g2c77g4b58g6a98522a6b394a6a8;1"
data "Description" "h098941ccgc4ecg49f2g6a45123ed0b02e844;3"
data "Icon" "GenericIcon_Intent_Utility"
data "Properties" "Highlighted;OncePerCombat"
data "Boosts" "UnlockInterrupt(Interrupt_LuckyDrawEnemy);UnlockInterrupt(Interrupt_LuckyDrawPlayer)"
data "StatsFunctorContext" "OnCombatStarted;OnTurn"
data "Conditions" "Combat()"
data "StatsFunctors" "RestoreResource(LuckPoint, 100%, 0)"

new entry "Reflexive"
type "PassiveData"
data "DisplayName" "h653597fcg1942g4ce1gaefag1ecf2fanak99;1"
data "Description" "h853b555ege835g49e1g9e27g74680e26a488;4"
data "ExtraDescription" "h853b555ege835g49e1g9e27g74680e28a744;1"
data "Icon" "GenericIcon_Intent_Utility"
data "Properties" "Highlighted;IsToggled;ToggledDefaultOn;ToggledDefaultAddToHotbar"
data "EnabledConditions" "HasActionResource('Thief_Charge', 1, 0, false, false, context.Source)"
data "EnabledContext" "OnLongRest;OnActionResourcesChanged"
data "Boosts" "UnlockSpellVariant(SpellId('Shout_Dash'),ModifyUseCosts(Replace,ActionPoint,0,-1,ActionPoint));UnlockSpellVariant(SpellId('Shout_Disengage'),ModifyUseCosts(Replace,ActionPoint,0,-1,ActionPoint));UnlockSpellVariant(SpellId('Target_Help'),ModifyUseCosts(Replace,ActionPoint,0,-1,ActionPoint));UnlockSpellVariant(SpellId('Shout_Hide'),ModifyUseCosts(Replace,ActionPoint,0,-1,ActionPoint));UnlockSpellVariant(SpellId('Throw_ImprovisedWeapon'),ModifyUseCosts(Replace,ActionPoint,0,-1,ActionPoint));UnlockSpellVariant(SpellId('Throw_Throw'),ModifyUseCosts(Replace,ActionPoint,0,-1,ActionPoint));UnlockSpellVariant(SpellId('Target_Dip'),ModifyUseCosts(Replace,BonusActionPoint,0,-1,BonusActionPoint));UnlockSpellVariant(SpellId('Projectile_Jump'),ModifyUseCosts(Replace,BonusActionPoint,0,-1,BonusActionPoint));UnlockSpellVariant(SpellId('Target_Shove'),ModifyUseCosts(Replace,BonusActionPoint,0,-1,BonusActionPoint))
data "StatsFunctorContext" "OnCast"
data "Conditions" "SpellId('Shout_Dash') or SpellId('Shout_Disengage') or SpellId('Target_Help') or SpellId('Shout_Hide') or SpellId('Throw_ImprovisedWeapon') or SpellId('Throw_Throw') or SpellId('Target_Dip') or SpellId('Projectile_Jump') or SpellId('Target_Shove')"
data "StatsFunctors" "UseActionResource(SELF,Thief_Charge,1,0)"
data "ToggleGroup" "RogueMovement"

new entry "NaturalSmokebomb"
type "PassiveData"
data "DisplayName" "hc45582046a987g4b58gafb6g0ba6b394a6a8;1"
data "Description" "h098941cc6a654g49f2gb22agabed0b02e844;3"
data "Icon" "GenericIcon_Intent_Utility"
data "Properties" "Highlighted;IsToggled;ToggledDefaultOn;ToggledDefaultAddToHotbar"
data "StatsFunctorContext" "OnStatusApplied"
data "Conditions" "(StatusId('SNEAKING') or HasAnyStatus({'SG_Invisible'})) and Combat(context.Source)"
data "StatsFunctors" "GROUND:CreateSurface(3,1,FogCloud,true)"

new entry "NaturalSmokebomb_Boosts"
type "PassiveData"
data "DisplayName" "hc45582046a987g4b58gafb6g0ba6b394a6a8;1"
data "Description" "h098941cc6a654g49f2gb22agabed0b02e844;3"
data "Icon" "GenericIcon_Intent_Utility"
data "Properties" "IsHidden"
data "Boosts" "StatusImmunity(SG_Blinded);StatusImmunity(SG_Prone);StatusImmunity(SG_Restrained)"

new entry "GetOutofJailFree"
type "PassiveData"
data "DisplayName" "hc4558204g2c77g4b58gafb6g0ba6b394a6a8;1"
data "Description" "h098941ccgc4ecg49f2gb22agabed0b02e844;4"
data "Icon" "GenericIcon_Intent_Utility"
data "Properties" "Highlighted;ForceShowInCC"
data "StatsFunctorContext" "OnAttack"
data "Conditions" "IsCriticalMiss()"
data "StatsFunctors" "ApplyStatus(SELF,LUCKY_DRAW,100,1)"

new entry "GetOutofJailFree_Miss"
type "PassiveData"
data "DisplayName" "hc4558204g2c77g4b58gafb6g0ba6b394a6a8;1"
data "Description" "h098941ccgc4ecg49f2gb22agabed0b02e844;4"
data "Icon" "GenericIcon_Intent_Utility"
data "Properties" "IsHidden"
data "StatsFunctorContext" "OnAttacked"
data "Conditions" "IsCriticalMiss()"
data "StatsFunctors" "ApplyStatus(LUCKY_DRAW,100,1)"

new entry "WhatGoesAround"
type "PassiveData"
data "DisplayName" "h098941ccgc4ecg49f2gb27a855ed0b02e844;1"
data "Description" "hc4558204g2c77g4b58gaf999a8a6b394a6a8;2"
data "Icon" "GenericIcon_Intent_Utility"
data "Properties" "Highlighted;ForceShowInCC"

new entry "NoHonorAmongUs"
type "PassiveData"
data "DisplayName" "h653597fcg1942g4ce1gaefag1ecf2fa5a4a2;1"
data "Description" "h853b555ege835g49e1g9e27g74680e28376e;4"
data "Icon" "GenericIcon_Intent_Utility"
data "Properties" "Highlighted;ForceShowInCC"
data "Boosts" "ActionResource(ReactionActionPoint,3,0)"

<!--PASSIVES-->

new entry "Cunning_Strikes"
type "PassiveData"
data "DisplayName" "d3e15e63749c4b62b8e7760cc707412000001;1"
data "Description" "d3e15e63749c4b62b8e7760cc70741200000a;2"
data "Icon" "PassiveFeature_NaturallyStealthy"
data "Properties" "Highlighted;ForceShowInCC"
data "Boosts" "UnlockSpell(Projectile_CunningFangs);IF(IsAttackType(AttackType.RangedUnarmedAttack)):RollBonus(Attack,DexterityModifier)"

new entry "Cutthroat"
type "PassiveData"
data "DisplayName" "d3e15e63749c4b62b8e7760cc707412000002;1"
data "Description" "d3e15e63749c4b62b8e7760cc70741200000b;2"
data "ExtraDescription" "h197f62bbgd1ddg4436g90df5s6s5d4f56f45"
data "Icon" "PassiveFeature_NaturallyStealthy"
data "Properties" "Highlighted;ForceShowInCC"
data "Boosts" "CriticalHitExtraDice(1)"

new entry "Elusive_Retreat"
type "PassiveData"
data "DisplayName" "d3e15e63749c4b62b8e7760cc707412000004;1"
data "Description" "d3e15e63749c4b62b8e7760cc70741200000d;2"
data "ExtraDescription" "h197f62bbgd1ddg4436g90df5s6s5d4f56f45"
data "Icon" "PassiveFeature_NaturallyStealthy"
data "Properties" "Highlighted;ForceShowInCC"
data "StatsFunctorContext" "OnDamage"
data "Conditions" "IsKillingBlow() and Character() and not Self() and not Ally() or IsCritical() and Character() and not Self() and not Ally()"
data "StatsFunctors" "IF(not HasStatus('DISENGAGE', context.Source)):ApplyStatus(SELF,DISENGAGE, 100, 1);IF(HasStatus('DASH_STACKED', context.Source)):ApplyStatus(SELF,DASH_STACKED_2,100,1);IF(not HasStatus('DASH_STACKED_2', context.Source) and HasStatus('DASH', context.Source)):ApplyStatus(SELF,DASH_STACKED,100,1);IF(not HasStatus('DASH_STACKED_2', context.Source) and not HasStatus('DASH_STACKED', context.Source) and not HasStatus('DASH', context.Source)):ApplyStatus(SELF,DASH,100,1)"

new entry "Elusive_Shadow"
type "PassiveData"
data "DisplayName" "d3e15e63749c4b62b8e7760cc707412000005;1"
data "Description" "d3e15e63749c4b62b8e7760cc70741200000e;2"
data "Icon" "PassiveFeature_NaturallyStealthy"
data "Properties" "Highlighted;ForceShowInCC"
data "StatsFunctorContext" "OnDamage"
data "Conditions" "IsKillingBlow() and Character() and not Self() and not Ally() or IsCritical() and Character() and not Self() and not Ally()"
data "StatsFunctors" "IF(not HasStatus('SNEAKING_FREE', context.Source)):ApplyStatus(SELF,SNEAKING_FREE, 100, 1)"

new entry "Fast_Hands"
type "PassiveData"
data "DisplayName" "d3e15e63749c4b62b8e7760cc707412000006;1"
data "Description" "d3e15e63749c4b62b8e7760cc70741200000f;2"
data "Icon" "PassiveFeature_NaturallyStealthy"
data "Properties" "Highlighted;ForceShowInCC"
data "Boosts" "Advantage(Skill,Acrobatics);Advantage(Skill,SleightOfHand);Advantage(Skill,Stealth)"

new entry "Fatal_Manoeuvre"
type "PassiveData"
data "DisplayName" "d3e15e63749c4b62b8e7760cc707412000007;1"
data "Description" "d3e15e63749c4b62b8e7760cc70741200000g;2"
data "ExtraDescription" "h197f62bbgd1ddg4436g90df5s6s5d4f56f45"
data "Icon" "PassiveFeature_NaturallyStealthy"
data "Properties" "Highlighted;ForceShowInCC"
data "Boosts" "IF(HasStatus('SNEAKING', context.Source) or HasStatus('SG_Invisible', context.Source)):ReduceCriticalAttackThreshold(1)"

new entry "Grievous_Wounds"
type "PassiveData"
data "DisplayName" "d3e15e63749c4b62b8e7760cc707412000003;1"
data "Description" "d3e15e63749c4b62b8e7760cc70741200000c;2"
data "Icon" "PassiveFeature_NaturallyStealthy"
data "Properties" "Highlighted;ForceShowInCC"

new entry "Illusory_Advantage"
type "PassiveData"
data "DisplayName" "d3e15e63749c4b62b8e7760cc707412000008;1"
data "Description" "d3e15e63749c4b62b8e7760cc70741200000h;2"
data "Icon" "PassiveFeature_NaturallyStealthy"
data "Properties" "Highlighted;ForceShowInCC"
data "Boosts" "UnlockSpell(Target_EnhancedIllusion)"

new entry "Light_Footwork"
type "PassiveData"
data "DisplayName" "d3e15e63749c4b62b8e7760cc707412000009;4"
data "Description" "d3e15e63749c4b62b8e7760cc70741200000i;4"
data "ExtraDescription" "h197f62bbgd1ddg4436g90df5s6s5d4f56f45"
data "Icon" "PassiveFeature_NaturallyStealthy"
data "Properties" "Highlighted"
data "StatsFunctorContext" "OnCreate;OnLongRest;OnTurn"
data "StatsFunctors" "IF(not HasStatus('FREEDOM_OF_MOVEMENT_ROGUE', context.Source)):ApplyStatus(SELF,FREEDOM_OF_MOVEMENT_ROGUE,100,-1)"

new entry "Low_Visibility"
type "PassiveData"
data "DisplayName" "d3e15e63749c4b62b8e7760cc707412000010;1"
data "Description" "d3e15e63749c4b62b8e7760cc70741200000j;2"
data "Icon" "PassiveFeature_NaturallyStealthy"
data "Properties" "Highlighted;ForceShowInCC"
data "BoostConditions" "not HasObscuredState(ObscuredState.Clear,context.Source)"
data "BoostContext" "OnObscurityChanged"
data "Boosts" "AC(2)"

new entry "Manipulator"
type "PassiveData"
data "DisplayName" "d3e15e63749c4b62b8e7760cc707412000011;1"
data "Description" "d3e15e63749c4b62b8e7760cc70741200000k;2"
data "Icon" "PassiveFeature_NaturallyStealthy"
data "Properties" "Highlighted;ForceShowInCC"
data "Boosts" "Advantage(Skill,Deception);Advantage(Skill,Persuasion)"
data "StatsFunctorContext" "OnTurn"
data "StatsFunctors" "IF(RollDieAgainstDC(DiceType.d4,3)):RestoreResource(LuckPoint, 1, 0)"

new entry "Now_You_See_Me"
type "PassiveData"
data "DisplayName" "d3e15e63749c4b62b8e7760cc707412000012;1"
data "Description" "d3e15e63749c4b62b8e7760cc70741200000l;2"
data "Icon" "PassiveFeature_NaturallyStealthy"
data "Properties" "Highlighted;ForceShowInCC"
data "Boosts" "UnlockInterrupt(Interrupt_Now_You_Dont)"

new entry "Quick_Reflexes"
type "PassiveData"
data "DisplayName" "d3e15e63749c4b62b8e7760cc707412000013;2"
data "Description" "d3e15e63749c4b62b8e7760cc70741200000m;2"
data "ExtraDescription" "h197f62bbgd1ddg4436g90df5s6s5d4f56f45"
data "Icon" "PassiveFeature_NaturallyStealthy"
data "Properties" "Highlighted;ForceShowInCC"
data "Boosts" "ActionResource(ReactionActionPoint,1,0)"
data "StatsFunctorContext" "OnDamage"
data "Conditions" "IsReactionAttack()"
data "StatsFunctors" "ApplyStatus(HEMORRHAGED,100,3)"

new entry "Reactive_Movement"
type "PassiveData"
data "DisplayName" "d3e15e63749c4b62b8e7760cc707412000014;1"
data "Description" "d3e15e63749c4b62b8e7760cc70741200000n;2"
data "ExtraDescription" "h197f62bbgd1ddg4436g90df5s6s5d4f56f45"
data "Icon" "PassiveFeature_NaturallyStealthy"
data "Properties" "Highlighted;IsToggled;ToggledDefaultOn;ToggledDefaultAddToHotbar"
data "Boosts" "UnlockSpellVariant(SpellId('Shout_Dash'),ModifyUseCosts(Replace,ActionPoint,0,-1,ActionPoint),ModifyUseCosts(Add,ReactionActionPoint,1,0));UnlockSpellVariant(SpellId('Shout_Disengage'),ModifyUseCosts(Replace,ActionPoint,0,-1,ActionPoint),ModifyUseCosts(Add,ReactionActionPoint,1,0));IF(not HasStatus('SNEAKING', context.Source)):UnlockSpellVariant(SpellId('Shout_Hide'),ModifyUseCosts(Replace,ActionPoint,0,-1,ActionPoint),ModifyUseCosts(Add,ReactionActionPoint,1,0));IF(HasStatus('SNEAKING', context.Source)):UnlockSpellVariant(SpellId('Shout_Hide'),ModifyUseCosts(Replace,ActionPoint,0,-1,ActionPoint))"
data "ToggleGroup" "RogueMovement"

new entry "Sharp_Eyes"
type "PassiveData"
data "DisplayName" "d3e15e63749c4b62b8e7760cc707412000015;1"
data "Description" "d3e15e63749c4b62b8e7760cc70741200000o;2"
data "Icon" "PassiveFeature_NaturallyStealthy"
data "Properties" "Highlighted;ForceShowInCC"
data "Boosts" "RollBonus(SkillCheck, 20, Perception);RollBonus(SkillCheck, 20, Insight);"

new entry "CSpectre"
type "PassiveData"
data "DisplayName" "d3e15e63749c4b62b8e7760cc707412000016;1"
data "Description" "d3e15e63749c4b62b8e7760cc70741200000p;2"
data "DescriptionParams" "Distance(9)"
data "Icon" "PassiveFeature_NaturallyStealthy"
data "Properties" "Highlighted;ForceShowInCC"
data "Boosts" "UnlockSpell(Target_Spectral_Movement)"

new entry "Spectral_Hunter"
type "PassiveData"
data "DisplayName" "d3e15e63749c4b62b8e7760cc707412000017;2"
data "Description" "d3e15e63749c4b62b8e7760cc70741200000q;1"
data "DescriptionParams" "Distance(9)"
data "Icon" "PassiveFeature_NaturallyStealthy"
data "Properties" "Highlighted;ForceShowInCC;OncePerTurn"
data "StatsFunctorContext" "OnTurn;OnStatusApplied"
data "Conditions" "HasStatus('SNEAKING', context.Source) or HasAnyStatus({'SG_Invisible'})"
data "StatsFunctors" "CreateExplosion(SELF,Projectile_Spectral_Hunter)"

new entry "Umbral_Sight"
type "PassiveData"
data "DisplayName" "d3e15e63749c4b62b8e7760cc707412000018;1"
data "Description" "d3e15e63749c4b62b8e7760cc70741200000r;4"
data "DescriptionParams" " Distance(18)"
data "Icon" "PassiveFeature_NaturallyStealthy"
data "Properties" "Highlighted;ForceShowInCC"
data "Boosts" "DarkvisionRangeMin(18);ActiveCharacterLight(c46e7ba8-e746-7020-5146-287474d7b9f7);StatusImmunity(BLINDED_DARKNESS);IgnoreSurfaceCover(SurfaceDarknessCloud)"

new entry "Vanishing_Act"
type "PassiveData"
data "DisplayName" "d3e15e63749c4b62b8e7760cc707412000019;1"
data "Description" "d3e15e63749c4b62b8e7760cc70741200000s;2"
data "Icon" "PassiveFeature_NaturallyStealthy"
data "Properties" "Highlighted;ForceShowInCC"
data "Boosts" "UnlockInterrupt(Interrupt_Vanishing_Bomb)"

new entry "Venomous"
type "PassiveData"
data "DisplayName" "d3e15e63749c4b62b8e7760cc707412000020;1"
data "Description" "d3e15e63749c4b62b8e7760cc70741200000t;2"
data "Icon" "PassiveFeature_NaturallyStealthy"
data "Properties" "Highlighted;ForceShowInCC"
data "StatsFunctorContext" "OnDamage"
data "Conditions" "IsWeaponAttack() and not HasStatus('ALCH_TOXIN_WYVERN_CONDITION', context.Target)"
data "StatsFunctors" "IF(not SavingThrow(Ability.Constitution, SourceSpellDC())):ApplyStatus(ALCH_TOXIN_WYVERN_CONDITION,100,3, AdvantageOnPoisoned())"

<!--PASSIVE SUMMONS-->

new entry "Summon_Cutthroat"
type "PassiveData"
data "DisplayName" "d3e15e63749c4b62b8e7760cc707412000002;1"
data "Description" "d3e15e63749c4b62b8e7760cc70741200000b;2"
data "ExtraDescription" "h197f62bbgd1ddg4436g90df5s6s5d4f56f45"
data "Icon" "PassiveFeature_NaturallyStealthy"
data "Properties" "IsHidden"
data "StatsFunctorContext" "OnCreate;OnLongRest;OnTurn"
data "Conditions" "HasPassive('Cutthroat',GetSummoner(context.Source)) or HasPassive('Cutthroat_Item',GetSummoner(context.Source))"
data "StatsFunctors" "IF(not HasStatus('CUTTHROAT_SUMMON', context.Source)):ApplyStatus(SELF,CUTTHROAT_SUMMON,100,-1)"

new entry "CUTTHROAT_SUMMON"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "d3e15e63749c4b62b8e7760cc707412000002;1"
data "Description" "d3e15e63749c4b62b8e7760cc70741200000b;2"
data "ExtraDescription" "h197f62bbgd1ddg4436g90df5s6s5d4f56f45"
data "Icon" "PassiveFeature_NaturallyStealthy"
data "StackId" "CUTTHROAT_SUMMON"
data "StackType" "Ignore"
data "Boosts" "CriticalHitExtraDice(1)"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator;IgnoreResting"

new entry "Summon_Elusive_Retreat"
type "PassiveData"
data "DisplayName" "d3e15e63749c4b62b8e7760cc707412000004;1"
data "Description" "d3e15e63749c4b62b8e7760cc70741200000d;2"
data "ExtraDescription" "h197f62bbgd1ddg4436g90df5s6s5d4f56f45"
data "Icon" "PassiveFeature_NaturallyStealthy"
data "Properties" "IsHidden"
data "StatsFunctorContext" "OnDamage"
data "Conditions" "HasPassive('Elusive_Retreat',GetSummoner(context.Source)) and IsKillingBlow() and Character() and not Self() and not Ally() or HasPassive('Elusive_Retreat',GetSummoner(context.Source)) and IsCritical() and Character() and not Self() and not Ally()"
data "StatsFunctors" "IF(not HasStatus('DISENGAGE', context.Source)):ApplyStatus(SELF,DISENGAGE, 100, 1);IF(HasStatus('DASH_STACKED', context.Source)):ApplyStatus(SELF,DASH_STACKED_2,100,1);IF(not HasStatus('DASH_STACKED_2', context.Source) and HasStatus('DASH', context.Source)):ApplyStatus(SELF,DASH_STACKED,100,1);IF(not HasStatus('DASH_STACKED_2', context.Source) and not HasStatus('DASH_STACKED', context.Source) and not HasStatus('DASH', context.Source)):ApplyStatus(SELF,DASH,100,1)"

new entry "Summon_Fatal_Manoeuvre"
type "PassiveData"
data "DisplayName" "d3e15e63749c4b62b8e7760cc707412000007;1"
data "Description" "d3e15e63749c4b62b8e7760cc70741200000g;2"
data "ExtraDescription" "h197f62bbgd1ddg4436g90df5s6s5d4f56f45"
data "Icon" "PassiveFeature_NaturallyStealthy"
data "Properties" "IsHidden"
data "Boosts" "IF((HasPassive('Fatal_Manoeuvre',GetSummoner(context.Source)) or HasPassive('Fatal_Manoeuvre_Item',GetSummoner(context.Source))) and HasStatus('SNEAKING', context.Source) or (HasPassive('Fatal_Manoeuvre',GetSummoner(context.Source)) or HasPassive('Fatal_Manoeuvre',GetSummoner(context.Source))) and HasStatus('SG_Invisible', context.Source)):ReduceCriticalAttackThreshold(1)"

new entry "Summon_Light_Footwork"
type "PassiveData"
data "DisplayName" "d3e15e63749c4b62b8e7760cc707412000009;4"
data "Description" "d3e15e63749c4b62b8e7760cc70741200000i;4"
data "ExtraDescription" "h197f62bbgd1ddg4436g90df5s6s5d4f56f45"
data "Icon" "PassiveFeature_NaturallyStealthy"
data "Properties" "IsHidden"
data "StatsFunctorContext" "OnCreate;OnLongRest;OnTurn"
data "Conditions" "HasPassive('Light_Footwork',GetSummoner(context.Source))"
data "StatsFunctors" "IF(not HasStatus('FREEDOM_OF_MOVEMENT_ROGUE', context.Source)):ApplyStatus(SELF,FREEDOM_OF_MOVEMENT_ROGUE,100,-1)"

new entry "Summon_Quick_Reflexes"
type "PassiveData"
data "DisplayName" "d3e15e63749c4b62b8e7760cc707412000013;2"
data "Description" "d3e15e63749c4b62b8e7760cc70741200000m;2"
data "ExtraDescription" "h197f62bbgd1ddg4436g90df5s6s5d4f56f45"
data "Icon" "PassiveFeature_NaturallyStealthy"
data "Properties" "IsHidden"
data "Boosts" "IF(HasPassive('Quick_Reflexes',GetSummoner(context.Source))):ActionResource(ReactionActionPoint,1,0)"
data "StatsFunctorContext" "OnDamage"
data "Conditions" "HasPassive('Quick_Reflexes',GetSummoner(context.Source)) and IsReactionAttack()"
data "StatsFunctors" "ApplyStatus(HEMORRHAGED,100,3)"

new entry "Summon_Reactive_Movement"
type "PassiveData"
data "DisplayName" "d3e15e63749c4b62b8e7760cc707412000014;1"
data "Description" "d3e15e63749c4b62b8e7760cc70741200000n;2"
data "ExtraDescription" "h197f62bbgd1ddg4436g90df5s6s5d4f56f45"
data "Icon" "PassiveFeature_NaturallyStealthy"
data "Properties" "IsHidden"
data "StatsFunctorContext" "OnCreate;OnLongRest;OnTurn"
data "Conditions" "HasPassive('Reactive_Movement',GetSummoner(context.Source))"
data "StatsFunctors" "IF(not HasStatus('REACTIVE_MOVEMENT_SUMMON', context.Source)):ApplyStatus(SELF,REACTIVE_MOVEMENT_SUMMON,100,-1)"

new entry "REACTIVE_MOVEMENT_SUMMON"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "d3e15e63749c4b62b8e7760cc707412000014;1"
data "Description" "d3e15e63749c4b62b8e7760cc70741200000n;2"
data "ExtraDescription" "h197f62bbgd1ddg4436g90df5s6s5d4f56f45"
data "Icon" "PassiveFeature_NaturallyStealthy"
data "StackId" "REACTIVE_MOVEMENT_SUMMON"
data "StackType" "Ignore"
data "Passives" "Reactive_Movement"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator;IgnoreResting"

<!--NPC SPECIFIC-->

new entry "Unlock_DirtyTricks_NPC"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "UnlockSpell(Target_DirtyTrick_Disarm);UnlockSpell(Target_DirtyTrick_Blind);UnlockSpell(Target_DirtyTrick_Vicious);UnlockSpell(Target_DirtyTrick_Panache)"

new entry "Unlock_StolenExplosives_NPC"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "UnlockSpell(Target_DirtyTrick_StolenExplosives)"

new entry "Unlock_CannonFire_NPC"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "UnlockSpell(Target_DirtyTrick_CannonFire)"

new entry "Force_Hide_NPC"
type "PassiveData"
data "Properties" "IsHidden"
data "StatsFunctorContext" "OnTurn"
data "StatsFunctors" "IF(not HasStatus('FORCE_HIDE_NPC', context.Source) and not HasStatus('SURPRISED', context.Source) and not HasStatus('FLANKED', context.Source)):ApplyStatus(FORCE_HIDE_NPC,100,1)"

new entry "FORCE_HIDE_NPC"
type "StatusData"
data "StatusType" "BOOST"
data "HitAnimationType" "None"
data "StackId" "FORCE_HIDE_NPC"
data "StackType" "Ignore"
data "TickType" "EndTurn"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator;IgnoreResting;ApplyToDead"
data "OnApplyFunctors" "IF(HasActionResource('BonusActionPoint', 1, 0, false, false, context.Source) and not HasStatus('SNEAKING', context.Source)):ApplyStatus(SNEAKING,100,-1);IF(HasActionResource('BonusActionPoint', 1, 0, false, false, context.Source) and not HasStatus('SNEAKING', context.Source)):UseActionResource(SELF,BonusActionPoint,1,0)"
