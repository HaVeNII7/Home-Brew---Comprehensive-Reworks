<!--BARD-->

new entry "Target_BardicInspiration"
type "SpellData"
data "SpellType" "Target"
data "SpellProperties" "IF(not ClassLevelHigherOrEqualThan(5,'Bard')):ApplyStatus(BARDIC_INSPIRATION,100, -1);IF(ClassLevelHigherOrEqualThan(5,'Bard') and not ClassLevelHigherOrEqualThan(9,'Bard')):ApplyStatus(BARDIC_INSPIRATION_D8,100, -1);IF(ClassLevelHigherOrEqualThan(9,'Bard')):ApplyStatus(BARDIC_INSPIRATION_D10,100, -1);IF(HasPassive('Echoes_of_Fortitude',context.Source)):ApplyStatus(ECHOES_OF_FORTITUDE,100, -1);IF(HasPassive('Encouraging_Momentum',context.Source) or HasPassive('Encouraging_Momentum_Item',context.Source)):ApplyStatus(DASH,100,1);IF(HasPassive('Encouraging_Momentum',context.Source) or HasPassive('Encouraging_Momentum_Item',context.Source)):ApplyStatus(DISENGAGE,100,1);IF(HasPassive('Encouraging_Momentum',context.Source) or HasPassive('Encouraging_Momentum_Item',context.Source)):ApplyStatus(SELF,DASH,100,1);IF(HasPassive('Encouraging_Momentum',context.Source) or HasPassive('Encouraging_Momentum_Item',context.Source)):ApplyStatus(SELF,DISENGAGE,100,1);IF(HasPassive('Engaging_Composition',context.Source) and HasWeaponInMainHand(context.Target)):ApplyStatus(COMMANDERS_STRIKE_D8_BARD,100,-1);IF(HasPassive('Inspirational_Resonance',context.Source)):CreateExplosion(Projectile_Inspirational_Resonance);IF(HasPassive('Soothing_Words',context.Source) or HasPassive('Soothing_Words_Item',context.Source)):ApplyStatus(SOOTHING_WORDS,100,-1);IF(HasPassive('Unprecedented_Encore',context.Source)):TriggerRandomCast(17,,WildMagicPositive);IF(HasPassive('Mobile_Maestro',context.Source)):SwapPlaces();AI_ONLY:ApplyStatus(SELF,AI_HELPER_BUFF,100,0)"
data "TargetRadius" "18"
data "TargetConditions" "Character() and not Enemy() and not Self() and not (HasStatus('BARDIC_INSPIRATION') or HasStatus('BARDIC_INSPIRATION_D8') or HasStatus('BARDIC_INSPIRATION_COMBAT') or HasStatus('BARDIC_INSPIRATION_COMBAT_D8'))"
data "Icon" "Action_Bard_RestoreBardicInspiration"
data "DisplayName" "he811cf79gab9dg4fc3g908dg12f52b41e976;1"
data "Description" "hb2e60320g20ebg4a60gb572g098b49a5c544;5"
data "DescriptionParams" "LevelMapValue(BardicInspiration)"
data "TooltipStatusApply" "ApplyStatus(BARDIC_INSPIRATION,100, -1)"
data "CastSound" "Spell_Cast_Bard_BardicInspiration_L1to3"
data "TargetSound" "Spell_Impact_Bard_BardicInspiration_L1to3"
data "PreviewCursor" "Cast"
data "CastTextEvent" "Cast"
data "InstrumentComponentPrepareSound" "Instrument_Bard_BardicInspiration_Prepare"
data "InstrumentComponentLoopingSound" "Instrument_Bard_BardicInspiration_Loop"
data "InstrumentComponentCastSound" "Instrument_Bard_BardicInspiration_Cast"
data "InstrumentComponentImpactSound" "Instrument_Bard_BardicInspiration_Impact"
data "CycleConditions" "Ally() and not Dead()"
data "UseCosts" "BonusActionPoint:1;BardicInspiration:1"
data "SpellAnimation" "850cd2f3-dde2-475d-b3a3-f35c47333523,,;,,;62819708-175d-4ad4-95d5-55757e18d981,,;2a6a403d-1b6f-41ea-9324-445761b2cbb3,,;ad775f69-0d9f-4215-bfc2-8e0ec7e32189,,;,,;6bfce8a0-80f1-47a8-97f4-34f4b8b6fe9e,,;,,;,,"
data "VerbalIntent" "Buff"
data "SpellStyleGroup" "Class"
data "SpellFlags" "HasVerbalComponent"
data "HitAnimationType" "None"
data "MaximumTargets" "1"
data "PrepareEffect" "cc478d8f-d3eb-46dc-844c-203ae2ec7df5"
data "CastEffect" "6c5aecc7-c5a0-4fda-9f9b-24afe3e1f76a"
data "TargetEffect" "b4d2ce64-af72-45a2-8146-6a9c3b71f1a6"
data "SpellSoundMagnitude" "Big"
data "Sheathing" "Instrument"
data "CombatAIOverrideSpell" "Target_BardicInspiration_NPC"

new entry "Target_BardicInspiration_NPC"
type "SpellData"
data "SpellType" "Shout"
using "Target_BardicInspiration"
data "SpellProperties" "IF(not CharacterLevelGreaterThan(4)):ApplyStatus(BARDIC_INSPIRATION,100, -1);IF(CharacterLevelGreaterThan(4) and not CharacterLevelGreaterThan(8)):ApplyStatus(BARDIC_INSPIRATION_D8,100, -1);IF(CharacterLevelGreaterThan(8)):ApplyStatus(BARDIC_INSPIRATION_D10,100, -1);IF(HasPassive('Echoes_of_Fortitude',context.Source)):ApplyStatus(ECHOES_OF_FORTITUDE,100, -1);IF(HasPassive('Encouraging_Momentum',context.Source) or HasPassive('Encouraging_Momentum_Item',context.Source)):ApplyStatus(DASH,100,1);IF(HasPassive('Encouraging_Momentum',context.Source) or HasPassive('Encouraging_Momentum_Item',context.Source)):ApplyStatus(DISENGAGE,100,1);IF(HasPassive('Encouraging_Momentum',context.Source) or HasPassive('Encouraging_Momentum_Item',context.Source)):ApplyStatus(SELF,DASH,100,1);IF(HasPassive('Encouraging_Momentum',context.Source) or HasPassive('Encouraging_Momentum_Item',context.Source)):ApplyStatus(SELF,DISENGAGE,100,1);IF(HasPassive('Engaging_Composition',context.Source) and HasWeaponInMainHand(context.Target)):ApplyStatus(COMMANDERS_STRIKE_D8_BARD,100,-1);IF(HasPassive('Inspirational_Resonance',context.Source)):CreateExplosion(Projectile_Inspirational_Resonance);IF(HasPassive('Soothing_Words',context.Source) or HasPassive('Soothing_Words_Item',context.Source)):ApplyStatus(SOOTHING_WORDS,100,-1);IF(HasPassive('Unprecedented_Encore',context.Source)):TriggerRandomCast(17,,WildMagicPositive);IF(HasPassive('Mobile_Maestro',context.Source)):SwapPlaces();AI_ONLY:ApplyStatus(SELF,AI_HELPER_BUFF,100,0)"
data "CombatAIOverrideSpell" ""

<!--COLLEGE OF SWORDS-->

new entry "Target_BladeFlourish_Defensive"
type "SpellData"
data "SpellType" "Target"
using "Target_MainHandAttack"
data "SpellProperties" "GROUND:DealDamage(MainMeleeWeapon, MainMeleeWeaponDamageType);GROUND:ExecuteWeaponFunctors(MainHand); ApplyStatus(SELF,BLADE_FLOURISH_DEFENSIVE,100,1);AI_ONLY:ApplyStatus(SELF,AI_HELPER_BUFF,100,0)"
data "SpellRoll" "Attack(AttackType.MeleeWeaponAttack)"
data "SpellSuccess" "DealDamage(max(1,MainMeleeWeapon + LevelMapValue(BardicInspiration)), MainMeleeWeaponDamageType); ExecuteWeaponFunctors(MainHand)"
data "Icon" "Action_DefensiveFlourish_Melee"
data "DisplayName" "h044a8a17g48efg4beeg928dgab0da805d9f8;4"
data "Description" "h8a371d2dg2e4ag40f6ga81fgdc54201ae616;7"
data "DescriptionParams" "4"
data "TooltipDamageList" "DealDamage(MainMeleeWeapon + LevelMapValue(BardicInspiration), MainMeleeWeaponDamageType)"
data "TooltipStatusApply" "ApplyStatus(BLADE_FLOURISH_DEFENSIVE,100,1)"
data "PrepareSound" "Action_Prepare_Bard_Flourish"
data "PrepareLoopSound" "Action_Loop_Bard_Flourish"
data "CastSound" "Action_Cast_Bard_DefensiveFlourishMelee"
data "AlternativeCastTextEvents" ""
data "UseCosts" "ActionPoint:1;BardicInspiration:1"
data "SpellAnimation" "a09de2c8-ec46-4c27-a502-bc92cf293fe5,,;9583ecee-cf6c-4735-86db-7ebf1df15eae,366693ee-d97f-4294-a4dd-a2145ddc4e6a,9f2d32b9-529a-4b75-b3df-6e1ae1395280;de006e3f-70fb-4eb7-a98d-d845d15b20e8,479ee5da-2967-41e1-b7d1-a94e864a5f25,79323098-edb3-4993-ba50-9b5f705e9878;50696db7-d931-4734-915d-32d038ba99a5,b5cb923d-0c08-4c20-89a9-44b9bf98c6cb,6282d127-0c06-4365-9d53-6f32ef350127;244b53cb-dc0f-4932-afd0-ab19c6df1b34,,;c36ed247-2272-492b-99c2-2ca10b014670,ecbf9949-3b33-432c-b735-e47aaed0924a,e71a7c08-fdc1-4a0b-9a90-1c793c58553c;0b07883a-08b8-43b6-ac18-84dc9e84ff50,,;,,;,,"
data "VerbalIntent" "Damage"
data "SpellFlags" "IsMelee;IsHarmful"
data "PrepareEffect" "9b55a45f-1859-4f55-8fd4-44a27d3fcba1"
data "CastEffect" "f573afc5-f018-4a87-a3a9-d1c0fe4e5b0d"

new entry "Target_BladeFlourish_Mobile"
type "SpellData"
data "SpellType" "Target"
using "Target_BladeFlourish_Defensive"
data "SpellProperties" "GROUND:DealDamage(MainMeleeWeapon, MainMeleeWeaponDamageType);GROUND:ExecuteWeaponFunctors(MainHand);AI_ONLY:ApplyStatus(SELF,AI_HELPER_BUFF,100,0)"
data "SpellSuccess" "DealDamage(max(1,MainMeleeWeapon + LevelMapValue(BardicInspiration)), MainMeleeWeaponDamageType); ExecuteWeaponFunctors(MainHand); Force(9); ApplyStatus(SELF,BLADE_FLOURISH_MOBILE,100,1)"
data "Icon" "Action_MobileFlourish_Melee"
data "DisplayName" "h1d68bdddgab35g467bgad0dg4a8e07d9d83e;4"
data "Description" "hc329d774gdabeg476agab5eg226cc81dd318;4"
data "DescriptionParams" "Distance(9)"
data "TooltipStatusApply" ""
data "CastSound" "Action_Cast_Bard_MobileFlourishMelee"
data "SpellAnimation" "a09de2c8-ec46-4c27-a502-bc92cf293fe5,,;b590e52e-a453-470a-882a-13e13b6d1937,b590e52e-a453-470a-882a-13e13b6d1937,b590e52e-a453-470a-882a-13e13b6d1937;412f122d-0773-4a08-bf1c-65749e543fb6,412f122d-0773-4a08-bf1c-65749e543fb6,412f122d-0773-4a08-bf1c-65749e543fb6;6748a2ec-fe1e-4aa4-ac27-570aedaba922,6748a2ec-fe1e-4aa4-ac27-570aedaba922,6748a2ec-fe1e-4aa4-ac27-570aedaba922;244b53cb-dc0f-4932-afd0-ab19c6df1b34,,;dced792c-ab29-450c-b9ec-d0c291c6c022,dced792c-ab29-450c-b9ec-d0c291c6c022,dced792c-ab29-450c-b9ec-d0c291c6c022;0b07883a-08b8-43b6-ac18-84dc9e84ff50,,;,,;,,"
data "SpellFlags" "IsMelee;IsHarmful;AddFallDamageOnLand"
data "CastEffect" "0e0bf555-2c21-4553-834a-d054d04fbd1b"
data "UseCosts" "ActionPoint:1;BardicInspiration:1"

new entry "Target_BladeFlourish_Mobile_FollowUp"
type "SpellData"
data "SpellType" "Target"
data "SpellProperties" "GROUND:TeleportSource()"
data "TargetRadius" "9"
data "TargetConditions" "CanStand('') and not Character() and not Self()"
data "Icon" "Action_Monk_MobileFlourish_Teleport"
data "DisplayName" "h6185b26agbf8ag4568g8c59ga2dc9a92bce5;2"
data "Description" "h9c3bed2cg0b7dg4032g9cbagf7a5df33e52a;6"
data "CastSound" "Action_Cast_Bard_MobileFlourishTeleport"
data "TargetSound" "Action_Impact_Bard_MobileFlourishTeleport"
data "CastTextEvent" "Cast"
data "SpellAnimation" "dd86aa43-8189-4d9f-9a5c-454b5fe4a197,,;,,;39daf365-ec06-49a8-81f3-9032640699d7,,;5c400e93-0266-499c-a2e1-75d53358460f,,;cc5b0caf-3ed1-4711-a50d-11dc3f1fdc6a,,;,,;1715b877-4512-472e-9bd0-fd568a112e90,,;,,;,,"
data "VerbalIntent" "Utility"
data "SpellFlags" "RangeIgnoreVerticalThreshold;Invisible;HasHighGroundRangeExtension;Temporary"
data "HitAnimationType" "None"
data "LineOfSightFlags" "AddSourceHeight"
data "PrepareEffect" "cc478d8f-d3eb-46dc-844c-203ae2ec7df5"
data "CastEffect" "7d3e8834-02c2-4641-bad5-23ad5b00d342"

<!--COLLEGE OF VALOUR-->

new entry "Target_BardicInspiration_Combat"
type "SpellData"
data "SpellType" "Target"
using "Target_BardicInspiration"
data "SpellProperties" "IF(HasPassive('ValorousCamaraderie', context.Source)):SpawnExtraProjectiles(Projectile_ValorousCamaraderie);IF(not ClassLevelHigherOrEqualThan(5,'Bard')):ApplyStatus(BARDIC_INSPIRATION_COMBAT,100, -1);IF(ClassLevelHigherOrEqualThan(5,'Bard') and not ClassLevelHigherOrEqualThan(9,'Bard')):ApplyStatus(BARDIC_INSPIRATION_COMBAT_D8,100, -1);IF(ClassLevelHigherOrEqualThan(9,'Bard')):ApplyStatus(BARDIC_INSPIRATION_COMBAT_D10,100, -1);IF(HasPassive('Echoes_of_Fortitude',context.Source)):ApplyStatus(ECHOES_OF_FORTITUDE,100, -1);IF(HasPassive('Encouraging_Momentum',context.Source) or HasPassive('Encouraging_Momentum_Item',context.Source)):ApplyStatus(DASH,100,1);IF(HasPassive('Encouraging_Momentum',context.Source) or HasPassive('Encouraging_Momentum_Item',context.Source)):ApplyStatus(DISENGAGE,100,1);IF(HasPassive('Encouraging_Momentum',context.Source) or HasPassive('Encouraging_Momentum_Item',context.Source)):ApplyStatus(SELF,DASH,100,1);IF(HasPassive('Encouraging_Momentum',context.Source) or HasPassive('Encouraging_Momentum_Item',context.Source)):ApplyStatus(SELF,DISENGAGE,100,1);IF(HasPassive('Engaging_Composition',context.Source) and HasWeaponInMainHand(context.Target)):ApplyStatus(COMMANDERS_STRIKE_D8_BARD,100,-1);IF(HasPassive('Inspirational_Resonance',context.Source)):CreateExplosion(Projectile_Inspirational_Resonance);IF(HasPassive('Soothing_Words',context.Source) or HasPassive('Soothing_Words_Item',context.Source)):ApplyStatus(SOOTHING_WORDS,100,-1);IF(HasPassive('Unprecedented_Encore',context.Source)):TriggerRandomCast(17,,WildMagicPositive);IF(HasPassive('Mobile_Maestro',context.Source)):SwapPlaces();IF(HasPassive('ValianceSupreme',context.Source)):ApplyStatus(VALIANCESUPREME,100,-1);AI_ONLY:ApplyStatus(SELF,AI_HELPER_BUFF,100,0)"
data "DisplayName" "h25beb4b1ge268g4d1dg9440g62bfc37e5266;1"
data "Description" "h69581877gf9c5g4250g8ff7g491e83e34177;5"
data "DescriptionParams" "LevelMapValue(BardicInspiration);4"
data "ExtraDescription" ""
data "Icon" "Action_Bard_GrantBardicInspiration"
data "TooltipStatusApply" "ApplyStatus(BARDIC_INSPIRATION_COMBAT,100, -1)"
data "UseCosts" "BonusActionPoint:1;BardicInspiration:1"

<!--PASSIVES-->

new entry "Target_CommanderStrike_Attack_D8_Bard"
type "SpellData"
data "SpellType" "Target"
using "Target_MainHandAttack"
data "SpellProperties" "GROUND:DealDamage(MainMeleeWeapon + LevelMapValue(BardicInspiration), MainMeleeWeaponDamageType);GROUND:ExecuteWeaponFunctors(MainHand);RemoveStatus(SELF,COMMANDERS_STRIKE_D8)"
data "SpellSuccess" "DealDamage(MainMeleeWeapon + LevelMapValue(BardicInspiration), MainMeleeWeaponDamageType);ExecuteWeaponFunctors(MainHand)"
data "Icon" "Action_Bladesong"
data "DisplayName" "h4344309ag115dg487bgbdcbg14552d855f69;2"
data "TooltipDamageList" "DealDamage(MainMeleeWeapon + LevelMapValue(BardicInspiration), MainMeleeWeaponDamageType)"
data "UseCosts" "ReactionActionPoint:1"
data "SpellAnimation" "a09de2c8-ec46-4c27-a502-bc92cf293fe5,,;9583ecee-cf6c-4735-86db-7ebf1df15eae,366693ee-d97f-4294-a4dd-a2145ddc4e6a,9f2d32b9-529a-4b75-b3df-6e1ae1395280;de006e3f-70fb-4eb7-a98d-d845d15b20e8,479ee5da-2967-41e1-b7d1-a94e864a5f25,79323098-edb3-4993-ba50-9b5f705e9878;50696db7-d931-4734-915d-32d038ba99a5,b5cb923d-0c08-4c20-89a9-44b9bf98c6cb,6282d127-0c06-4365-9d53-6f32ef350127;244b53cb-dc0f-4932-afd0-ab19c6df1b34,,;c36ed247-2272-492b-99c2-2ca10b014670,ecbf9949-3b33-432c-b735-e47aaed0924a,e71a7c08-fdc1-4a0b-9a90-1c793c58553c;0b07883a-08b8-43b6-ac18-84dc9e84ff50,,;,,;,,"
data "SpellFlags" "IsMelee;IsHarmful;Temporary"

new entry "Target_CommanderStrike_Attack_D8_Bard_Caster"
type "SpellData"
data "SpellType" "Target"
using "Target_MainHandAttack"
data "SpellProperties" "GROUND:DealDamage(MainMeleeWeapon + LevelMapValue(BardicInspiration), MainMeleeWeaponDamageType);GROUND:ExecuteWeaponFunctors(MainHand);"
data "SpellSuccess" "DealDamage(MainMeleeWeapon + LevelMapValue(BardicInspiration), MainMeleeWeaponDamageType);ExecuteWeaponFunctors(MainHand)"
data "Icon" "Action_Bladesong"
data "DisplayName" "h4344309ag115dg487bgbdcbg14552d855f69;2"
data "TooltipDamageList" "DealDamage(MainMeleeWeapon + LevelMapValue(BardicInspiration), MainMeleeWeaponDamageType)"
data "UseCosts" "ReactionActionPoint:1;BardicInspiration:1"
data "SpellAnimation" "a09de2c8-ec46-4c27-a502-bc92cf293fe5,,;9583ecee-cf6c-4735-86db-7ebf1df15eae,366693ee-d97f-4294-a4dd-a2145ddc4e6a,9f2d32b9-529a-4b75-b3df-6e1ae1395280;de006e3f-70fb-4eb7-a98d-d845d15b20e8,479ee5da-2967-41e1-b7d1-a94e864a5f25,79323098-edb3-4993-ba50-9b5f705e9878;50696db7-d931-4734-915d-32d038ba99a5,b5cb923d-0c08-4c20-89a9-44b9bf98c6cb,6282d127-0c06-4365-9d53-6f32ef350127;244b53cb-dc0f-4932-afd0-ab19c6df1b34,,;c36ed247-2272-492b-99c2-2ca10b014670,ecbf9949-3b33-432c-b735-e47aaed0924a,e71a7c08-fdc1-4a0b-9a90-1c793c58553c;0b07883a-08b8-43b6-ac18-84dc9e84ff50,,;,,;,,"
