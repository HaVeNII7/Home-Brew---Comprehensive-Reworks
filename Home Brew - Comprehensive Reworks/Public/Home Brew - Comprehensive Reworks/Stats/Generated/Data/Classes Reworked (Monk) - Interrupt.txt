<!--PASSIVES-->

new entry "Interrupt_Counterflow"
type "InterruptData"
data "DisplayName" "4512454c8e254628bd4dc62ea243a2a0000z1;1"
data "Description" "4512454c8e254628bd4dc62ea243a2a0000za;3"
data "Icon" "Action_Monk_FlurryOfBlows"
data "InterruptContext" "OnCastHit"
data "InterruptContextScope" "Self"
data "InterruptFlags" "InterruptWhileInvisible"
data "Container" "YesNoDecision"
data "Conditions" "IsAbleToReact(context.Observer) and Enemy(context.Source,context.Observer) and CanSee(context.Source,context.Observer) and IsMeleeAttack() and IsMiss() and not HasStatus('SG_Invisible',context.Source) and not AnyEntityIsItem() and not DistanceToEntityGreaterThan(2, context.ObserverPosition, context.Source) and HasLastAttackTriggered()"
data "Properties" "UseSpell(SWAP,Target_Counterflow,true,true,true);ApplyStatus(OBSERVER_OBSERVER,INTERRUPT_RIPOSTE,100,0)"
data "Cost" "ReactionActionPoint:1;KiPoint:1"
data "InterruptDefaultValue" "Ask;Enabled"
data "EnableCondition" "not HasStatus('SG_Polymorph_BeastShape') and not HasStatus('SG_Blinded')"
data "EnableContext" "OnStatusRemoved;OnStatusApplied"
data "Stack" "OnDodge"

new entry "Interrupt_DeflectMissiles"
type "InterruptData"
data "DisplayName" "4512454c8e254628bd4dc62ea243a2a0000z4;1"
data "Description" "4512454c8e254628bd4dc62ea243a2a0000zd;2"
data "Icon" "PassiveFeature_DeflectMissiles"
data "InterruptContext" "OnPreDamage"
data "InterruptContextScope" "Self"
data "InterruptFlags" "InterruptWhileInvisible"
data "Container" "YesNoDecision"
data "Conditions" "IsAbleToReact(context.Observer) and Self(context.Target,context.Observer) and IsRangedWeaponAttack() and not AnyEntityIsItem()"
data "Properties" "AdjustRoll(OBSERVER_OBSERVER,-(1d12+DexterityModifier+Level));ApplyStatus(OBSERVER_TARGET,INTERRUPT_DEFLECT_MISSILES_HIT,100,1)"
data "Cost" "ReactionActionPoint:1"
data "InterruptDefaultValue" "Ask;Enabled"
data "EnableCondition" "not HasStatus('SG_Polymorph_BeastShape') and not HasStatus('SG_Blinded')"
data "EnableContext" "OnStatusRemoved;OnStatusApplied"
data "Stack" "SelfAboutBeHit"

new entry "Interrupt_DeflectMissiles_Return"
type "InterruptData"
data "DisplayName" "4512454c8e254628bd4dc62ea243a2a000zz4;1"
data "Description" "4512454c8e254628bd4dc62ea243a2a000zzd;2"
data "Icon" "Action_Monk_DeflectMissile"
data "InterruptContext" "OnCastHit"
data "InterruptContextScope" "Self"
data "InterruptFlags" "InterruptWhileInvisible"
data "Container" "YesNoDecision"
data "Conditions" "IsAbleToReact(context.Observer) and Self(context.Target,context.Observer) and IsAttackType(AttackType.RangedWeaponAttack) and not (IsCriticalMiss() or IsMiss()) and not AnyEntityIsItem()"
data "Properties" "UseSpell(SWAP,Projectile_Deflect_Missiles,true,true,true,c4598bdb-fc07-40dd-a62c-90cc138bd76f)"
data "Cost" "KiPoint:1"
data "InterruptDefaultValue" "Ask;Enabled"
data "EnableCondition" "not HasStatus('SG_Polymorph_BeastShape') and not HasStatus('SG_Blinded')"
data "EnableContext" "OnStatusRemoved;OnStatusApplied"

new entry "Interrupt_Opportune_Reversal"
type "InterruptData"
data "DisplayName" "4512454c8e254628bd4dc62ea243a2a000z13;1"
data "Description" "4512454c8e254628bd4dc62ea243a2a0000zm;3"
data "Icon" "Action_Monk_FreeUnarmedStrike"
data "InterruptContext" "OnCastHit"
data "InterruptContextScope" "Self"
data "InterruptFlags" "InterruptWhileInvisible"
data "Container" "YesNoDecision"
data "Conditions" "IsAbleToReact(context.Observer) and Enemy(context.Source,context.Observer) and CanSee(context.Source,context.Observer) and IsMeleeAttack() and IsMiss() and not HasStatus('SG_Invisible',context.Source) and not AnyEntityIsItem() and not DistanceToEntityGreaterThan(2, context.ObserverPosition, context.Source) and HasLastAttackTriggered()"
data "Properties" "UseSpell(SWAP,Target_Opportune_Reversal,true,true,true);ApplyStatus(OBSERVER_OBSERVER,INTERRUPT_RIPOSTE,100,0)"
data "Cost" "ReactionActionPoint:1"
data "InterruptDefaultValue" "Ask;Enabled"
data "EnableCondition" "not HasStatus('SG_Blinded')"
data "EnableContext" "OnStatusRemoved;OnStatusApplied"
data "Stack" "OnDodge"

new entry "Interrupt_Tempestuous_Reprise"
type "InterruptData"
data "DisplayName" "4512454c8e254628bd4dc62ea243a2a000z17;1"
data "Description" "4512454c8e254628bd4dc62ea243a2a0000zq;2"
data "DescriptionParams" "Distance(9);DealDamage(UnarmedDamage , Bludgeoning);Distance(4.5)"
data "Icon" "Action_IronboundPursuit"
data "InterruptContext" "OnCastHit"
data "InterruptContextScope" "Nearby"
data "InterruptFlags" "InterruptWhileInvisible"
data "Container" "YesNoDecision"
data "Conditions" "not Self(context.Target,context.Observer) and not Self(context.Source,context.Observer) and CanSee(context.Source,context.Observer) and Ally(context.Target, context.Observer) and Enemy(context.Source, context.Observer) and not HasStatus('SG_Invisible',context.Source) and IsAbleToReact(context.Observer) and not DistanceToEntityGreaterThan(9, context.ObserverPosition, context.Source) and not AnyEntityIsItem() and HasLastAttackTriggered()"
data "Properties" "UseSpell(OBSERVER_SOURCE,Target_Tempestuous_Reprise,true,true,true)"
data "Cost" "ReactionActionPoint:1;CounterAction:1"
data "InterruptDefaultValue" "Ask;Enabled"
data "EnableCondition" "not HasStatus('SG_Polymorph_BeastShape') and not HasStatus('SG_Blinded')"
data "EnableContext" "OnStatusRemoved;OnStatusApplied"
data "Stack" "OnAllyDamaged"

new entry "Interrupt_ZenAccuracy"
type "InterruptData"
data "DisplayName" "4512454c8e254628bd4dc62ea243a2a000z20;1"
data "Description" "4512454c8e254628bd4dc62ea243a2a0000zt;3"
data "Icon" "Action_KarsusCompulsion"
data "InterruptContext" "OnCastHit"
data "InterruptContextScope" "Self"
data "InterruptFlags" "InterruptWhileInvisible"
data "Container" "YesNoDecision"
data "Conditions" "IsAbleToReact(context.Observer) and Self(context.Source,context.Observer) and (IsKillingBlow() or IsCritical()) and not AnyEntityIsItem()"
data "Properties" "ApplyStatus(OBSERVER_OBSERVER,ZENACCURACY,100,0);ApplyStatus(OBSERVER_OBSERVER,INTERRUPT_RIPOSTE,100,0)"
data "Cost" "ReactionActionPoint:1"
data "InterruptDefaultValue" "Ask;Enabled"
data "Stack" "OnKillCritical"
