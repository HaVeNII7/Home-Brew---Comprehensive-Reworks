new entry "MAG_TheVictory_Longbow"
type "Weapon"
using "WPN_Longbow_2"
data "RootTemplate" "7e81bb6a-f465-4fe9-b1db-7ce6198246ba"
data "ValueUUID" "d24c441f-7ebe-4229-8522-cf34c257ff20"
data "Rarity" "Legendary"
data "DefaultBoosts" "Tag(ORI_GALE_CONSUMABLEARTEFACT);WeaponEnchantment(3);WeaponDamage(1d8, Radiant)"
data "BoostsOnEquipMainHand" "UnlockSpell(Shout_SteadyRanged);UnlockSpell(Projectile_MobileShooting);UnlockSpell(Projectile_HamstringShot);UnlockSpell(Zone_MAG_Automaton_SunbeamShot_Gontr)"
data "PassivesOnEquip" "MAG_Victory_Longbow_Passive"
data "Unique" "1"
data "Damage Range" "6000"
data "WeaponRange" "3600"
data "UseCosts" "ReactionActionPoint:1;Attunement:4"
data "StatusOnEquip" "ATTUNEMENT4"

new entry "Projectile_MAG_Victory_Longbow_RoaringShot"
type "SpellData"
data "SpellType" "Projectile"
using "Projectile_MenacingAttack"
data "Cooldown" "OncePerShortRestPerItem"
data "SpellProperties" "ApplyEquipmentStatus(SELF, RangedMainHand, MAG_RADIANT_RADIANCE_WEAPON,100,-1);GROUND:DealDamage(MainRangedWeapon, MainRangedWeaponDamageType);GROUND:ExecuteWeaponFunctors(MainHand);IF(not Player(context.Source)):ApplyStatus(SELF,AI_HELPER_EXTRAATTACK,100,1);;CastOffhand[GROUND:DealDamage(OffhandRangedWeapon,OffhandRangedWeaponDamageType);GROUND:ExecuteWeaponFunctors(OffHand)]"
data "SpellSuccess" "IF(not SavingThrow(Ability.Wisdom, SourceSpellDC(),AdvantageOnFrightened())):ApplyStatus(FRIGHTENED,100,1);DealDamage(MainRangedWeapon+ProficiencyBonus, MainRangedWeaponDamageType);ExecuteWeaponFunctors(MainHand);DealDamage(6d6, Radiant);ApplyStatus(MAG_CELESTIAL_BOW_IMPACT, 100, 0)"
data "Icon" "Action_Mag_BoltOfCelestialLight"
data "DisplayName" "h76741c27g4ff0g43c5ga82eg1dc1cc7db056;3"
data "Description" "h7464584dgbdd1g4080g83d7gdf3b63300777;5"
data "DescriptionParams" "DealDamage(1d4, Radiant)"
data "TooltipDamageList" "DealDamage(MainRangedWeapon+ProficiencyBonus, MainRangedWeaponDamageType);DealDamage(6d6, Radiant)"
data "HitCosts" ""
data "SpellFlags" "HasHighGroundRangeExtension;RangeIgnoreVerticalThreshold;IsHarmful;IsDefaultWeaponAction"
data "DamageType" "Radiant"
data "UseCosts" "ActionPoint:1"

new entry "MAG_Victory_Longbow_Passive"
type "PassiveData"
data "Icon" "PassiveFeature_Generic_Tactical"
data "DisplayName" "h435c62cegbdf0g47bbg9a01g7a49c25ece84;2"
data "Description" "hb41b2302g5610g4454gb396gc1dbf211f268;6"
data "StatsFunctorContext" "OnDamage"
data "Conditions" "AttackedWithPassiveSourceWeapon()"
data "StatsFunctors" "ApplyStatus(GUIDING_BOLT, 100, 1)"

new entry "Zone_MAG_Automaton_SunbeamShot_Gontr"
type "SpellData"
data "SpellType" "Zone"
data "SpellSchool" "Evocation"
data "SurfaceType" "Sentinel"
data "SurfaceLifetime" "0"
data "SurfaceGrowStep" "5"
data "SurfaceGrowInterval" "10"
data "SpellRoll" "not SavingThrow(Ability.Constitution, SourceSpellDC())"
data "SpellSuccess" "DealDamage(max(1,MainRangedWeapon), Radiant)"
data "SpellFail" "DealDamage(max(1,MainRangedWeapon)/2,Radiant,Magical)"
data "TargetConditions" "not Dead() and not (HasPassive('SculptSpells', context.Source) and Ally() or HasPassive('Metamagic_Careful', context.Source) and Ally()) and not Tagged('INVISIBLE_HELPER')"
data "Icon" "Spell_Evocation_Sunbeam"
data "DisplayName" "hb6c344ffg50d7g4778gb8e5gd87166ccf2ef;2"
data "Description" "hf9b2c054g0a98g4663g9b7bg6dcdf9fa0116;2"
data "TooltipDamageList" "DealDamage(MainRangedWeapon+ProficiencyBonus, Radiant)"
data "TooltipAttackSave" "Constitution"
data "TooltipOnSave" "f762efbb-f8f1-493e-b248-2de1567b4bd2"
data "PrepareSound" "Spell_Prepare_Damage_Radiant_Sunbeam_L6to8"
data "PrepareLoopSound" "Spell_Loop_Damage_Radiant_Sunbeam_L6to8"
data "CastSound" "Spell_Cast_Damage_Radiant_Sunbeam_L6to8"
data "TargetSound" "Spell_Impact_Damage_Radiant_Sunbeam_L6to8"
data "CastTextEvent" "Cast"
data "Shape" "Square"
data "Range" "18"
data "Base" "2"
data "CycleConditions" "Enemy() and not Dead()"
data "UseCosts" "ActionPoint:1"
data "SpellAnimation" "73afb4e5-8cfe-4479-95cf-16889597fee3,,;7e67bfd0-2fc2-4d10-bed5-cfda9e660de5,,;eb054308-7fce-4b85-bf4c-7a0031fda7ac,,;0b0dc35b-4953-45c0-a9eb-8d3fef5e798a,,;6ec808e1-e128-44ef-9361-a713bf86de8f,,;b2e9c771-3497-444c-b360-23b4441985a1,,;f920a0a6-f257-4ce4-8d17-2dcaa7bb7bbb,,;,,;,,"
data "VerbalIntent" "Damage"
data "SpellFlags" "HasSomaticComponent;IsHarmful;IsDefaultWeaponAction"
data "MemoryCost" "1"
data "PrepareEffect" "bb817069-1b71-4b63-959c-b85e03a492eb"
data "CastEffect" "2ef28b19-d0cc-4260-8dc5-b1905c116add"
data "TargetEffect" "ddc1430f-4a0d-42c3-9ac8-ec4c3deaed35"
data "BeamEffect" "94cab8bc-58f3-450d-8138-c1852ce28ee7"
data "DamageType" "Radiant"
data "SpellSoundMagnitude" "Big"
data "WeaponTypes" "Ammunition"
data "Sheathing" "Ranged"
data "RequirementConditions" "not HasStatus('SG_Polymorph_BeastShape')"

new entry "CONSUMED_GONTRMAEL"
type "StatusData"
data "StatusType" "BOOST"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator;ApplyToDead;IgnoreResting"
data "TickType" "EndTurn"
data "Boosts" "ActionResource(Attunement,0,0);IF(Tagged('FRONTIER_KNIGHT', context.Source)):UnlockSpell(Zone_MAG_Automaton_SunbeamShot_Gontr)"
