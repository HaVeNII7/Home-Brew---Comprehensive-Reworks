new entry "CRE_BloodOfLathander"
type "Weapon"
using "WPN_Mace_2"
data "RootTemplate" "96a35552-0c05-4df0-9974-2a8f142e4be6"
data "ValueUUID" "d24c441f-7ebe-4229-8522-cf34c257ff20"
data "Rarity" "Legendary"
data "DefaultBoosts" "Tag(ORI_GALE_CONSUMABLEARTEFACT);WeaponEnchantment(3)"
data "Boosts" "UnlockSpell(Zone_MAG_BloodOfLathander_Sunbeam)"
data "PassivesOnEquip" "FreeHandling;CRE_LathandersBlessing_Passive;CRE_LathandersLight_Passive;CRE_LathandersBlessing_Cooldown_Passive"
data "Unique" "1"
data "UseCosts" "ReactionActionPoint:1;Attunement:4"
data "StatusOnEquip" "MAG_LATHANDERS_LIGHT_TECHNICAL;ATTUNEMENT4"

new entry "CRE_LathandersBlessing_Passive"
type "PassiveData"
data "Icon" "PassiveFeature_Generic_Tactical"
data "DisplayName" "habe46d08g7762g41c0g9cefgeb22e36285c7;2"
data "Description" "h9424896dg6e9bg4f8dg8cc3g21e4740ff830;3"
data "DescriptionParams" "RegainHitPoints(6d6);Distance(9);RegainHitPoints(3d6)"
data "Properties" "OncePerLongRest"
data "StatsFunctorContext" "OnDamaged;OnHealed;OnStatusApplied"
data "Conditions" "HasHPPercentageEqualOrLessThan(0) and HasStatus('MAG_LATHANDERS_BLESSING_RESURRECT_RESOURCE')"
data "StatsFunctors" "ApplyStatus(MAG_LATHANDERS_BLESSING_RESURRECT_TECHNICAL, 100, 0);RemoveStatus(MAG_LATHANDERS_BLESSING_RESURRECT_RESOURCE);IF(HasStatus('MAG_LATHANDERS_TRACKER', GetItemInEquipmentSlot(EquipmentSlot.MeleeMainHand, context.Target))):ApplyEquipmentStatus(MeleeMainHand, MAG_LATHANDERS_BLESSING_RESURRECT_RESOURCE_DEPLETED, 100, -1);IF(HasStatus('MAG_LATHANDERS_TRACKER', GetItemInEquipmentSlot(EquipmentSlot.MeleeOffHand, context.Target))):ApplyEquipmentStatus(MeleeOffHand, MAG_LATHANDERS_BLESSING_RESURRECT_RESOURCE_DEPLETED, 100, -1)"

new entry "MAG_LATHANDERS_BLESSING_RESURRECT_TECHNICAL"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "h5bade051g2354g466dg98eag13ba92767f87;2"
data "StackId" "MAG_LATHANDERS_BLESSING_RESURRECT_TECHNICAL"
data "StatusPropertyFlags" "ApplyToDead;DisableOverhead;DisableCombatlog;DisablePortraitIndicator"
data "OnApplyFunctors" "Stabilize();IF(Dead()):Resurrect(100,1)"
data "OnRemoveFunctors" "CreateExplosion(Projectile_CRE_LathandersBlessing_HealingExplosion);RegainHitPoints(6d6, Guaranteed);ResetCombatTurn();RestoreResource(Movement, 100%, 0);RestoreResource(BonusActionPoint, 100%, 0);RestoreResource(ActionPoint, 100%, 0);RestoreResource(ReactionActionPoint, 100%, 0)"

new entry "Projectile_CRE_LathandersBlessing_HealingExplosion"
type "SpellData"
data "SpellType" "Projectile"
data "SpellProperties" "IF(Character() and not Self() and not Dead() and Party(context.Target)):Stabilize();IF(Character() and not Self() and not Dead() and Party(context.Target)):RegainHitPoints(3d6, Guaranteed)"
data "TargetFloor" "-1"
data "TargetRadius" "9"
data "AreaRadius" "9"
data "ExplodeRadius" "9"
data "SpellRoll" ""
data "SpellSuccess" ""
data "SpellFail" ""
data "TargetConditions" "Character() and not Self() and not Dead() and Party(context.Target)"
data "Trajectories" "ef170800-9a73-4bf6-881d-6194418f121c"
data "Icon" "GenericIcon_Intent_Healing"
data "DisplayName" "h779d3c1egc64cg471dg915bgcb1edeb79564;1"
data "CastTextEvent" "Cast"
data "SpellFlags" "IsTrap"
data "HitAnimationType" "MagicalNonDamage"

new entry "CRE_LathandersLight_Passive"
type "PassiveData"
data "Icon" "PassiveFeature_Generic_Tactical"
data "DisplayName" "h341bcbd8gb78eg4cf7g834bge5fb441d134f;2"
data "Description" "h126c1189g8ee0g4b60g8dd3gba78b511c8ed;4"
data "DescriptionParams" "Distance(9)"
data "Icon" "PassiveFeature_LathandersLight"
data "Properties" "IsToggled;ToggledDefaultOn;Temporary"
data "ToggleOnFunctors" "ApplyStatus(MAG_LATHANDERS_LIGHT, 100, -1)"
data "ToggleOffFunctors" "RemoveStatus(MAG_LATHANDERS_LIGHT)"

new entry "MAG_LATHANDERS_LIGHT"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "h182ffe42gf794g433fga220gbb65f442dfca;2"
data "Description" "h964bf61ag78a2g40c4g9f39g558530d68b91;3"
data "DescriptionParams" "Distance(9)"
data "Icon" "statIcons_LathandersLight"
data "StackId" "MAG_LATHANDERS_LIGHT"
data "AuraRadius" "6"
data "AuraStatuses" "TARGET:IF(not HasStatus('SITOUT_ONCOMBATSTART_APPLIER_TECHNICAL',context.Source) and not HasStatus('SITOUT_ONCOMBATSTART_DOONCE_TECHNICAL',context.Source) and not HasStatus('BANISHED',context.Source) and not HasStatus('BANISHED_FINALSTAND',context.Source) and Combat() and Character() and Enemy() and (Tagged('FIEND') or Tagged('UNDEAD') or Tagged('UNDEAD_BEAST'))):ApplyStatus(MAG_LATHANDERS_LIGHT_BLIND_AURA_TARGET, 100, -1);TARGET:IF(Character() and not Dead() and HasPassive('SunlightHypersensitivity')):ApplyStatus(SUNLIGHT_FROM_SPELL_TECHNICAL)"
data "AuraFlags" "ShouldCheckLOS"
data "Boosts" "GameplayLight(9,false,0.1,true)"
data "StatusPropertyFlags" "DisableCombatlog;IgnoreResting;ApplyToDead"
data "StatusGroups" "SG_Light"

new entry "MAG_LATHANDERS_LIGHT_BLIND_AURA_TARGET"
type "StatusData"
data "StatusType" "BOOST"
using "MAG_LATHANDERS_LIGHT"
data "StackId" "MAG_LATHANDERS_LIGHT_BLIND_AURA_TARGET"
data "AuraRadius" ""
data "AuraStatuses" ""
data "AuraFlags" ""
data "TickType" "StartTurn"
data "Boosts" ""
data "StatusPropertyFlags" "IgnoreResting;DisableOverhead;DisableCombatlog;DisablePortraitIndicator"
data "OnApplyFunctors" "IF(not HasStatus('MAG_LATHANDERS_LIGHT_BLINDED_SAVED')):ApplyStatus(MAG_LATHANDERS_LIGHT_BLIND_AURA_TARGET_FIRST_APPLY,100, 0)"
data "OnRemoveFunctors" "ApplyStatus(MAG_LATHANDERS_LIGHT_BLINDED_SAVED, 100, 1);RemoveStatus(MAG_LATHANDERS_LIGHT_BLINDED)"
data "OnTickRoll" "not SavingThrow(Ability.Constitution,SourceSpellDC())"
data "OnTickSuccess" "IF(not HasStatus('MAG_LATHANDERS_LIGHT_BLINDED_SAVED')):ApplyStatus(MAG_LATHANDERS_LIGHT_BLINDED, 100, 1)"
data "OnTickFail" "RemoveStatus(MAG_LATHANDERS_LIGHT_BLINDED);ApplyStatus(MAG_LATHANDERS_LIGHT_BLINDED_SAVED, 100, 1)"
data "StatusGroups" ""
data "IsUnique" ""

new entry "CRE_LathandersBlessing_Cooldown_Passive"
type "PassiveData"
data "Properties" "IsHidden"
data "StatsFunctorContext" "OnLongRest;OnCreate"
data "StatsFunctors" "IF(context.HasContextFlag(StatsFunctorContext.OnLongRest)):ApplyStatus(MAG_LATHANDERS_BLESSING_RESURRECT_RESOURCE, 100, -1);IF(context.HasContextFlag(StatsFunctorContext.OnCreate) and HasStatus('MAG_LATHANDERS_TRACKER', GetItemInEquipmentSlot(EquipmentSlot.MeleeMainHand, context.Target)) and not HasStatus('MAG_LATHANDERS_BLESSING_RESURRECT_RESOURCE_DEPLETED', GetItemInEquipmentSlot(EquipmentSlot.MeleeMainHand, context.Target))):ApplyStatus(MAG_LATHANDERS_BLESSING_RESURRECT_RESOURCE, 100, -1);IF(context.HasContextFlag(StatsFunctorContext.OnCreate) and HasStatus('MAG_LATHANDERS_TRACKER', GetItemInEquipmentSlot(EquipmentSlot.MeleeOffHand, context.Target)) and not HasStatus('MAG_LATHANDERS_BLESSING_RESURRECT_RESOURCE_DEPLETED', GetItemInEquipmentSlot(EquipmentSlot.MeleeOffHand, context.Target))):ApplyStatus(MAG_LATHANDERS_BLESSING_RESURRECT_RESOURCE, 100, -1)"

new entry "Zone_MAG_BloodOfLathander_Sunbeam"
type "SpellData"
data "SpellType" "Zone"
data "Level" "6"
data "SpellSchool" "Evocation"
data "SpellProperties" "ApplyStatus(SELF,SUNBEAM_OWNER_6,100,-1)"
data "SurfaceType" "Sentinel"
data "SurfaceLifetime" "0"
data "SurfaceGrowStep" "5"
data "SurfaceGrowInterval" "10"
data "SpellRoll" "not SavingThrow(Ability.Constitution, SourceSpellDC())"
data "SpellSuccess" "DealDamage(6d6+24,Radiant,Magical);ApplyStatus(BLINDED,100,1)"
data "SpellFail" "DealDamage((6d6+24)/2,Radiant,Magical)"
data "TargetConditions" "not Dead() and not (HasPassive('SculptSpells', context.Source) and Ally() or HasPassive('Metamagic_Careful', context.Source) and Ally()) and not Tagged('INVISIBLE_HELPER')"
data "Icon" "Spell_Evocation_Sunbeam"
data "DisplayName" "h7f405eccgcdc0g47dbga900g5850375c4992;2"
data "Description" "h28bc92fegaeddg4ab5gbba3gb3440970298f;5"
data "TooltipDamageList" "DealDamage(6d6+24,Radiant)"
data "TooltipAttackSave" "Constitution"
data "TooltipStatusApply" "ApplyStatus(BLINDED,100,1);ApplyStatus(SUNBEAM_OWNER_6,100,-1)"
data "TooltipOnSave" "f762efbb-f8f1-493e-b248-2de1567b4bd2"
data "TooltipUpcastDescription" "66388a6f-44dd-4c9f-a9e7-910c50e70755"
data "TooltipUpcastDescriptionParams" "DealDamage(1d6+4,Radiant)"
data "PrepareSound" "Spell_Prepare_Damage_Radiant_Sunbeam_L6to8"
data "PrepareLoopSound" "Spell_Loop_Damage_Radiant_Sunbeam_L6to8"
data "CastSound" "Spell_Cast_Damage_Radiant_Sunbeam_L6to8"
data "TargetSound" "Spell_Impact_Damage_Radiant_Sunbeam_L6to8"
data "CastTextEvent" "Cast"
data "Shape" "Square"
data "Range" "18"
data "Base" "2"
data "CycleConditions" "Enemy() and not Dead()"
data "UseCosts" "ActionPoint:1"
data "SpellAnimation" "3ff87abf-1ea1-4c32-aadf-c822d74c7dc0,,;,,;d30d2b40-c45a-45bd-94d7-9b2baaf0f77b,,;a601b33c-5320-455d-b4d4-74d6dc35b757,,;d8925ce4-d6d9-400c-92f5-ad772ef7f178,,;,,;eadedcce-d01b-4fbb-a1ae-d218f13aa5d6,,;,,;,,"
data "VerbalIntent" "Damage"
data "SpellFlags" "HasVerbalComponent;HasSomaticComponent;IsSpell;IsHarmful"
data "MemoryCost" "1"
data "PrepareEffect" "bb817069-1b71-4b63-959c-b85e03a492eb"
data "CastEffect" "2ef28b19-d0cc-4260-8dc5-b1905c116add"
data "TargetEffect" "ddc1430f-4a0d-42c3-9ac8-ec4c3deaed35"
data "BeamEffect" "94cab8bc-58f3-450d-8138-c1852ce28ee7"
data "DamageType" "Radiant"
data "SpellSoundMagnitude" "Big"
data "Cooldown" "OncePerShortRestPerItem"
data "RequirementConditions" "not HasStatus('SG_Polymorph_BeastShape')"
